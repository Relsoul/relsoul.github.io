<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Soul,灵魂,凌魂,零魂,</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="&amp;lt;!DOCTYPE html&amp;gt;


  
  
  javascript实现各种字符串搜索算法 | Soul的随笔
  
  









  
    
  
  
    
  
  
  

var _hmt = _hmt || [];
(function() {
  var hm = document.createElement(&quot;script&quot;);
  hm.src = &quot;//hm">
<meta property="og:type" content="website">
<meta property="og:title" content="Soul,灵魂,凌魂,零魂,">
<meta property="og:url" content="http://emufan.com/old/2015/10/21/111ver/index.html">
<meta property="og:site_name" content="Soul,灵魂,凌魂,零魂,">
<meta property="og:description" content="&amp;lt;!DOCTYPE html&amp;gt;


  
  
  javascript实现各种字符串搜索算法 | Soul的随笔
  
  









  
    
  
  
    
  
  
  

var _hmt = _hmt || [];
(function() {
  var hm = document.createElement(&quot;script&quot;);
  hm.src = &quot;//hm">
<meta property="og:updated_time" content="2015-11-29T08:27:39.210Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Soul,灵魂,凌魂,零魂,">
<meta name="twitter:description" content="&amp;lt;!DOCTYPE html&amp;gt;


  
  
  javascript实现各种字符串搜索算法 | Soul的随笔
  
  









  
    
  
  
    
  
  
  

var _hmt = _hmt || [];
(function() {
  var hm = document.createElement(&quot;script&quot;);
  hm.src = &quot;//hm">
  
    <link rel="alternative" href="/atom.xml" title="Soul,灵魂,凌魂,零魂," type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="null" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">soul</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/old">老博客文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="/#" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://emufan.com">soul</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">soul,soul,soul</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">soul</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="null" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">soul</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/old">老博客文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="/#" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="page-undefined" class="article article-type-page" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/old/2015/10/21/111ver/index.html" class="article-date">
  	<time datetime="2015-12-01T16:57:48.565Z" itemprop="datePublished">2015-12-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>javascript实现各种字符串搜索算法 | Soul的随笔</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="转自http://www.gbtags.com/gb/share/4430.htm
我觉得在前端开发中过多地考虑算法没有太多实际的意义。但这仅仅是我觉得，我并没有证据证明这一点。那为何不来尝试一下，面对一个特定的任务，我将使用不同的算法来实现，看看究竟效率相差多少。今天我想通过字符串搜索这一场景来进行测试。
&amp;nbsp;
测试场景

主字符串就以ABC的一篇文章内容为例，略做修改
There ar">
<meta property="og:type" content="article">
<meta property="og:title" content="javascript实现各种字符串搜索算法">
<meta property="og:url" content="http://emufan.com/2015/10/21/111ver/index.html">
<meta property="og:site_name" content="Soul的随笔">
<meta property="og:description" content="转自http://www.gbtags.com/gb/share/4430.htm
我觉得在前端开发中过多地考虑算法没有太多实际的意义。但这仅仅是我觉得，我并没有证据证明这一点。那为何不来尝试一下，面对一个特定的任务，我将使用不同的算法来实现，看看究竟效率相差多少。今天我想通过字符串搜索这一场景来进行测试。
&amp;nbsp;
测试场景

主字符串就以ABC的一篇文章内容为例，略做修改
There ar">
<meta property="og:updated_time" content="2015-10-21T14:57:05.755Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="javascript实现各种字符串搜索算法">
<meta name="twitter:description" content="转自http://www.gbtags.com/gb/share/4430.htm
我觉得在前端开发中过多地考虑算法没有太多实际的意义。但这仅仅是我觉得，我并没有证据证明这一点。那为何不来尝试一下，面对一个特定的任务，我将使用不同的算法来实现，看看究竟效率相差多少。今天我想通过字符串搜索这一场景来进行测试。
&amp;nbsp;
测试场景

主字符串就以ABC的一篇文章内容为例，略做修改
There ar">
  
    <link rel="alternative" href="/atom.xml" title="Soul的随笔" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?aa495dca780db3bca4942d20b6eda966";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="null" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Soul</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="/#" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/code/" style="font-size: 15px;">code</a> <a href="/tags/jade/" style="font-size: 10px;">jade</a> <a href="/tags/mongoose/" style="font-size: 10px;">mongoose</a> <a href="/tags/了不起的nodejs/" style="font-size: 20px;">了不起的nodejs</a> <a href="/tags/自言语/" style="font-size: 10px;">自言语</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://emufan.com/">soul随笔</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Soul</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="null" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Soul</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="/#" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-111ver" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/111ver/" class="article-date">
  	<time datetime="2015-10-21T14:57:05.755Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      javascript实现各种字符串搜索算法
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p></p><p>转自<a href="http://www.gbtags.com/gb/share/4430.htm" target="_blank" rel="external">http://www.gbtags.com/gb/share/4430.htm</a></p><p></p>
<p></p><p>我觉得在前端开发中过多地考虑算法没有太多实际的意义。但这仅仅是我觉得，我并没有证据证明这一点。那为何不来尝试一下，面对一个特定的任务，我将使用不同的算法来实现，看看究竟效率相差多少。今天我想通过字符串搜索这一场景来进行测试。</p><p></p>
<p></p><p>&nbsp;</p><p></p>
<p></p><h2>测试场景</h2><p></p>
<p><ol></ol></p>
<p><li>主字符串就以ABC的一篇文章内容为例，略做修改<br></li></p>
<blockquote><p>There are some times when clicking “like” on a friend’s Facebook status doesn’t feel appropriate. A bad day. A loved one lost. A break up. It only seems natural that a “dislike” button could solve the conundrum of wanting to empathize but not seem inappropriate by clicking “like.” Mark Zuckerberg Puts the Rest of Us to Shame by Speaking Fluent Chinese. Mark Zuckerberg: Facebook Founder and Animal Butcher. Mark Zuckerberg and That Shirt. The idea has been on Mark Zuckerberg’s radar for a while, he said. In 2010, he told ABC News’ Diane Sawyer that that Facebook would “definitely think about” adding a dislike button. “People definitely seem to want it,” Zuckerberg said. Four years later — Zuckerberg says Facebook is still “thinking about” adding the oft-requested button, Zuckerberg says Facebook is still “thinking about” adding the oft-requested button. At a town hall meeting on Thursday, the CEO revealed he has some reservations about the feature. “There are two things that it can mean,” Zuckerberg said of the potential button, which could be used in a mean spirited way or to express empathy. Finding how to limit it to the latter is the challenge. Zuckerberg said he doesn’t want the button to turn into a “voting mechanism” or something that isn’t “socially valuable.” “Often people will tell us they don’t feel comfortable pressing ‘like,’” Zuckerberg said. “What’s the right way to make it so people can easier express a wide range of emotions?” One suggestion percolating online: Roll out the feature under a different name. However, an “empathy button” just may not have the same ring to it as “dislike.”</p></blockquote><br><br><li>模式字符串<br><ul><br><li>靠近起点 friend</li><br><li>靠近终点 button”</li><br><li>靠近中间 Zuckerberg says Facebook is still “thinking about” adding the oft-requested button.</li><br></ul><br></li><br><br><h3>暴力算法</h3><br><p>首先是最原始的做法，主串左侧开始，逐个对比，如果不相同，则主串起始点向后移一位，重复，直到找到。</p><br><p>第一次尝试 G C A T C G C A G A G A G T A T A C A G T A C G 1 2 3 4   G C A G A G A G   第二次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1     G C A G A G A G   第三次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1     G C A G A G A G   第四次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1     G C A G A G A G   第五次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1     G C A G A G A G   Sixth attempt G C A T C G C A G A G A G T A T A C A G T A C G   1 2 3 4 5 6 7 8     G C A G A G A G</p><br><p>以上示例（<a href="http://www.zhouhua.info/jump/0dcj" target="_blank">http://igm.univ-mlv.fr/~lecroq/string/examples/exp3.html</a>）说明了一次暴力搜索的过程。</p><br><p>我用JS模拟了这个算法：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="kwd">var</span><span class="pln"> mainString</span><span class="pun">=</span><span class="str">“”</span><span class="pun">;</span></li><br><li class="L1"><span class="kwd">var</span><span class="pln"> searchString</span><span class="pun">=</span><span class="str">“”</span></li><br><li class="L2"><span class="kwd">function</span><span class="pln"> basicSearch</span><span class="pun">(</span><span class="pln">mainStr</span><span class="pun">,</span><span class="pln"> str</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">){</span></li><br><li class="L3"><span class="kwd">var</span><span class="pln"> mainLength</span><span class="pun">=</span><span class="pln">mainStr</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L4"><span class="kwd">var</span><span class="pln"> searchLength</span><span class="pun">=</span><span class="pln">str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L5"><span class="kwd">if</span><span class="pun">(</span><span class="pln">searchLength</span><span class="pun">&gt;</span><span class="pln">mainLength</span><span class="pun">-</span><span class="pln">offset</span><span class="pun">){</span></li><br><li class="L6"><span class="kwd">return</span> <span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><br><li class="L7"><span class="pun">}</span></li><br><li class="L8"><span class="pln"> offset</span><span class="pun">=</span><span class="pln">offset</span><span class="pun">||</span><span class="lit">0</span><span class="pun">;</span></li><br><li class="L9"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">searchlength</span><span class="pun">&gt;</span><span class="pln">i </span><span class="pun">;</span><span class="pln">i</span><span class="pun">++){</span></li><br><li class="L0"><span class="kwd">if</span><span class="pun">(</span><span class="pln">str</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)!==</span><span class="pln">mainString</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">offset</span><span class="pun">+</span><span class="pln">i</span><span class="pun">)){</span></li><br><li class="L1"><span class="kwd">return</span><span class="pln"> basicSearch</span><span class="pun">(</span><span class="pln">mainStr</span><span class="pun">,</span><span class="pln"> str</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)</span></li><br><li class="L2"><span class="pun">}</span></li><br><li class="L3"><span class="pun">}</span></li><br><li class="L4"><span class="kwd">return</span><span class="pln"> offset</span><span class="pun">;</span></li><br><li class="L5"><span class="pun">}</span></li><br><li class="L6"><span class="pln">basicSearch</span><span class="pun">(</span><span class="pln">mainString</span><span class="pun">,</span><span class="pln"> searchString</span><span class="pun">);</span></li><br></ol><br></div><br><div class="jspVerticalBar"></div><br></div><br><p>非递归版：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="kwd">function</span><span class="pln"> basicSearchLoop</span><span class="pun">(</span><span class="pln">mainStr</span><span class="pun">,</span><span class="pln"> str</span><span class="pun">){</span></li><br><li class="L1"><span class="kwd">var</span><span class="pln"> mainLength</span><span class="pun">=</span><span class="pln">mainStr</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L2"><span class="kwd">var</span><span class="pln"> searchLength</span><span class="pun">=</span><span class="pln">str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L3"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> offset</span><span class="pun">=</span> <span class="lit">0</span><span class="pun">,</span><span class="pln">padding</span><span class="pun">=</span><span class="pln">mainLength</span><span class="pun">-</span><span class="pln">searchLength</span><span class="pun">;</span><span class="pln">offset</span><span class="pun">&lt;</span> <span class="pun">=</span><span class="pln">padding</span><span class="pun">;</span><span class="pln">offset</span><span class="pun">++)</span> <span class="pun">{</span></li><br><li class="L4"><span class="kwd">var</span><span class="pln"> match</span><span class="pun">=</span><span class="kwd">true</span><span class="pun">;</span></li><br><li class="L5"><span class="kwd">for</span> <span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> searchLength</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span> <span class="pun">{</span></li><br><li class="L6"><span class="kwd">if</span> <span class="pun">(</span><span class="pln">str</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span> <span class="pun">!==</span><span class="pln"> mainString</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">offset </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">))</span> <span class="pun">{</span></li><br><li class="L7"><span class="pln"> match</span><span class="pun">=</span><span class="kwd">false</span><span class="pun">;</span></li><br><li class="L8"><span class="kwd">break</span><span class="pun">;</span></li><br><li class="L9"><span class="pun">}</span></li><br><li class="L0"><span class="pun">}</span></li><br><li class="L1"><span class="kwd">if</span><span class="pun">(</span><span class="pln">match</span><span class="pun">)</span><span class="kwd">return</span><span class="pln"> offset</span><span class="pun">;</span></li><br><li class="L2"><span class="pun">}</span></li><br><li class="L3"><span class="kwd">return</span> <span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><br><li class="L4"><span class="pun">}</span></li><br></ol><br></div><br><div class="jspVerticalBar"></div><br></div><br><p>&nbsp;</p><br><h2>KMP算法（Knuth-Morris-Pratt算法）</h2><br><p>KMP算是字符串搜索算法里的明星。不过本文重点不是介绍算法历史，有兴趣的可以移步百度百科（<a href="http://www.zhouhua.info/jump/yqnx" target="_blank">KMP算法</a>）。这里一样先看一个例子：</p><br><p>第一次尝试 G C A T C G C A G A G A G T A T A C A G T A C G 1 2 3 4   G C A G A G A G</p><br><p>移动步数: 4 (<em>i</em>-<em>kmpNext</em>[<em>i</em>]=3- -1)</p><br><p>第二次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1     G C A G A G A G</p><br><p>移动步数: 1 (<em>i</em>-<em>kmpNext</em>[<em>i</em>]=0- -1)</p><br><p>第三次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1 2 3 4 5 6 7 8     G C A G A G A G</p><br><p>移动步数: 7 (<em>i</em>-<em>kmpNext</em>[<em>i</em>]=8-1)</p><br><p>如果每次发生不一致都要计算一次效率太低，可以考虑将计算结果缓存到一张<strong>部分匹配表</strong>中（也可以在搜索之前先生成此表）。以intristed为例：移动步数: 1 (<em>i</em>-<em>kmpNext</em>[<em>i</em>]=0- -1)</p><br><p><a href="http://www.zhouhua.info/jump/b5bz" target="_blank">原始示例出处</a>。我们看到，这里有一个 kmpNext 数组，这是什么呢？我们慢慢来理解。每一次尝试匹配时，从模式字符串的左端开始对比，如果第i个字符相同，则比较第i+1个；如果不相同，则需要把模式字符串向右移动。移动的位数是算法优劣的关键。每次移动一位是暴力算法的做法。kmp算法有自己独特的移动步数计算方法。</p><br><p>首先引入两个概念：<strong>前缀</strong>和<strong>后缀</strong>。</p><br><ul><br><li>前缀：一个字符串所有头部的集合，不包含自身；</li><br><li>后缀：一个字符串所有尾部的集合，不包含自身。</li><br></ul><br><p>我们看下面的例子（编号从1开始编）：</p><br><p>i n t r i s t i n g 1 2 3 4 5 6 7 8 9   i n t r i s t e d</p><br><p>在模式串8的位置发生了不匹配，那么要计算模式串右移的位数之前，我们先写出位置1~7处的子串intrist的前缀和后缀：</p><br><ul><br><li>前缀：i, in, int, intr, intri, intris, intrist</li><br><li>后缀：t, st, ist, rist, trist, ntrist, intrist</li><br></ul><br><p>我们再定义一个<strong>部分匹配值</strong>的概念：前缀和后缀交集中，长度最长的元素的长度。很显然，这里前缀和后缀没有交集，最长共同元素的长度也就认为是0，那么模式串向右移动（8-0=）8个字符。跟上面的算法（上面是7-(-1)）稍有不同，不过大体意思一样，计算结果也一样。</p><br><p>部分匹配表 模式字符串 i n t r i s t e d 序号 1 2 3 4 5 6 7 8 9 部分匹配值 0 0 0 0 1 0 0 0 0</p><br><p>计算右移位数就可以很容易地从表中计算出来：</p><br><blockquote><p>移动位数=已匹配的位数-已匹配部分的部分匹配值</p></blockquote><br><p>例如在第6个位置s处发现不匹配，那么需要右移5-1=4位。</p><br><p>但这样计算其实并不方便，比如已匹配位数为0的情况很难处理，所以我们可以对部分匹配值做一个修正，每个值减去1，公式也相应调整为：</p><br><blockquote><p>移动位数=不匹配字符的位置-已匹配部分的修正部分匹配值</p></blockquote><br><p>这样这个公式就与上面示例中的公式相同了。</p><br><p>我用JS模拟了这个算法：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="kwd">function</span> <span class="typ">KMPSearch</span><span class="pun">(</span><span class="pln">mainLength</span><span class="pun">,</span><span class="pln">str</span><span class="pun">,</span><span class="pln">offset</span><span class="pun">,</span><span class="kwd">group</span><span class="pun">){</span></li><br><li class="L1"><span class="kwd">var</span><span class="pln"> mainLength</span><span class="pun">=</span><span class="pln">mainString</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L2"><span class="kwd">var</span><span class="pln"> searchLength</span><span class="pun">=</span><span class="pln">str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L3"><span class="kwd">if</span><span class="pun">(</span><span class="pln">searchLength</span><span class="pun">&gt;</span><span class="pln">mainLength</span><span class="pun">-</span><span class="pln">offset</span><span class="pun">){</span></li><br><li class="L4"><span class="kwd">return</span> <span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><br><li class="L5"><span class="pun">}</span></li><br><li class="L6"><span class="pln"> offset</span><span class="pun">=</span><span class="pln">offset</span><span class="pun">||</span><span class="lit">0</span><span class="pun">;</span></li><br><li class="L7"><span class="kwd">group</span><span class="pun">=</span><span class="kwd">group</span><span class="pun">||[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">];</span></li><br><li class="L8"><span class="kwd">var</span><span class="pln"> searchedString</span><span class="pun">=[];</span></li><br><li class="L9"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">searchlength</span><span class="pun">&gt;</span><span class="pln">i </span><span class="pun">;</span><span class="pln">i</span><span class="pun">++){</span></li><br><li class="L0"><span class="kwd">var</span><span class="pln"> searchingChar</span><span class="pun">=</span><span class="pln">str</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span></li><br><li class="L1"><span class="kwd">if</span><span class="pun">(</span><span class="pln">searchingChar</span><span class="pun">!==</span><span class="pln">mainString</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">offset</span><span class="pun">+</span><span class="pln">i</span><span class="pun">)){</span></li><br><li class="L2"><span class="kwd">var</span><span class="pln"> offsetJump</span><span class="pun">;</span></li><br><li class="L3"><span class="kwd">if</span><span class="pun">(</span><span class="kwd">group</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span> <span class="pun">{</span></li><br><li class="L4"><span class="pln"> offsetJump </span><span class="pun">=</span> <span class="kwd">group</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></li><br><li class="L5"><span class="pun">}</span><span class="kwd">else</span><span class="pun">{</span></li><br><li class="L6"><span class="pln"> offsetJump </span><span class="pun">=</span> <span class="kwd">next</span><span class="pun">(</span><span class="pln">searchedString</span><span class="pun">);</span></li><br><li class="L7"><span class="kwd">group</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]=</span><span class="pln">offsetJump</span><span class="pun">;</span></li><br><li class="L8"><span class="pun">}</span></li><br><li class="L9"><span class="kwd">return</span> <span class="typ">KPMSearch</span><span class="pun">(</span><span class="pln">mainLength</span><span class="pun">,</span><span class="pln">str</span><span class="pun">,</span><span class="pln">offset</span><span class="pun">+</span><span class="pln">offsetJump</span><span class="pun">,</span><span class="kwd">group</span><span class="pun">);</span></li><br><li class="L0"><span class="pun">}</span></li><br><li class="L1"><span class="pln"> searchedString</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">searchingChar</span><span class="pun">);</span></li><br><li class="L2"><span class="pun">}</span></li><br><li class="L3"><span class="kwd">return</span><span class="pln"> offset</span><span class="pun">;</span></li><br><li class="L4"><span class="pun">}</span></li><br><li class="L5"><span class="kwd">function</span> <span class="kwd">next</span><span class="pun">(</span><span class="pln">chars</span><span class="pun">){</span></li><br><li class="L6"><span class="kwd">var</span><span class="pln"> length</span><span class="pun">=</span><span class="pln">chars</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L7"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i</span><span class="pun">=</span><span class="pln">length</span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&gt;</span><span class="lit">0</span><span class="pun">;</span><span class="pln">i</span><span class="pun">–){</span></li><br><li class="L8"><span class="kwd">var</span><span class="pln"> isMatch</span><span class="pun">=</span><span class="kwd">true</span><span class="pun">;</span></li><br><li class="L9"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span> <span class="pun">;</span><span class="pln">j</span><span class="pun">&lt;</span> <span class="pun">=</span><span class="pln">i</span><span class="pun">;</span><span class="pln">j</span><span class="pun">++){</span></li><br><li class="L0"><span class="kwd">if</span><span class="pun">(</span><span class="pln">chars</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]!==</span><span class="pln">chars</span><span class="pun">[</span><span class="pln">length</span><span class="pun">-</span><span class="pln">i</span><span class="pun">+</span><span class="pln">j</span><span class="pun">]){</span></li><br><li class="L1"><span class="pln"> isMatch</span><span class="pun">=</span><span class="kwd">false</span><span class="pun">;</span></li><br><li class="L2"><span class="kwd">break</span><span class="pun">;</span></li><br><li class="L3"><span class="pun">}</span></li><br><li class="L4"><span class="pun">}</span></li><br><li class="L5"><span class="kwd">if</span><span class="pun">(</span><span class="pln">isMatch</span><span class="pun">)</span><span class="kwd">return</span><span class="pln"> length</span><span class="pun">-</span><span class="pln">i</span><span class="pun">;</span></li><br><li class="L6"><span class="pun">}</span></li><br><li class="L7"><span class="kwd">return</span><span class="pln"> length</span><span class="pun">;</span></li><br><li class="L8"><span class="pun">}</span></li><br></ol><br></div><br><div class="jspVerticalBar"></div><br></div><br><p>非递归版：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="kwd">function</span> <span class="typ">KMPSearchLoop</span><span class="pun">(</span><span class="pln">mainStr</span><span class="pun">,</span><span class="pln"> str</span><span class="pun">)</span> <span class="pun">{</span></li><br><li class="L1"><span class="kwd">var</span><span class="pln"> mainLength</span><span class="pun">=</span><span class="pln">mainString</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L2"><span class="kwd">var</span><span class="pln"> searchLength </span><span class="pun">=</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L3"><span class="kwd">for</span> <span class="pun">(</span><span class="kwd">var</span><span class="pln"> offset </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">,</span><span class="pln"> padding </span><span class="pun">=</span><span class="pln"> mainLength </span><span class="pun">-</span><span class="pln"> searchLength</span><span class="pun">,</span> <span class="kwd">group</span> <span class="pun">=</span> <span class="pun">[</span><span class="lit">1</span><span class="pun">,</span> <span class="lit">1</span><span class="pun">];</span><span class="pln"> offset </span><span class="pun">&lt;</span> <span class="pun">=</span><span class="pln"> padding</span><span class="pun">;){</span></li><br><li class="L4"><span class="kwd">var</span><span class="pln"> searchedString </span><span class="pun">=</span> <span class="pun">[];</span></li><br><li class="L5"><span class="kwd">var</span><span class="pln"> match</span><span class="pun">=</span><span class="kwd">true</span><span class="pun">;</span></li><br><li class="L6"><span class="kwd">var</span><span class="pln"> offsetJump</span><span class="pun">;</span></li><br><li class="L7"><span class="kwd">for</span> <span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> searchLength</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span> <span class="pun">{</span></li><br><li class="L8"><span class="kwd">var</span><span class="pln"> searchingChar </span><span class="pun">=</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span></li><br><li class="L9"><span class="kwd">if</span> <span class="pun">(</span><span class="pln">searchingChar </span><span class="pun">!==</span><span class="pln"> mainString</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">offset </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">))</span> <span class="pun">{</span></li><br><li class="L0"><span class="pln"> match</span><span class="pun">=</span><span class="kwd">false</span><span class="pun">;</span></li><br><li class="L1"><span class="kwd">if</span> <span class="pun">(</span><span class="kwd">group</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span> <span class="pun">{</span></li><br><li class="L2"><span class="pln"> offsetJump </span><span class="pun">=</span> <span class="kwd">group</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></li><br><li class="L3"><span class="pun">}</span></li><br><li class="L4"><span class="kwd">else</span> <span class="pun">{</span></li><br><li class="L5"><span class="pln"> offsetJump </span><span class="pun">=</span> <span class="kwd">next</span><span class="pun">(</span><span class="pln">searchedString</span><span class="pun">);</span></li><br><li class="L6"><span class="kwd">group</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span> <span class="pun">=</span><span class="pln"> offsetJump</span><span class="pun">;</span></li><br><li class="L7"><span class="pun">}</span></li><br><li class="L8"><span class="kwd">break</span><span class="pun">;</span></li><br><li class="L9"><span class="pun">}</span></li><br><li class="L0"><span class="pln"> searchedString</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">searchingChar</span><span class="pun">);</span></li><br><li class="L1"><span class="pun">}</span></li><br><li class="L2"><span class="kwd">if</span><span class="pun">(</span><span class="pln">match</span><span class="pun">){</span></li><br><li class="L3"><span class="kwd">return</span><span class="pln"> offset</span><span class="pun">;</span></li><br><li class="L4"><span class="pun">}</span><span class="kwd">else</span><span class="pun">{</span></li><br><li class="L5"><span class="pln"> offset</span><span class="pun">+=</span><span class="pln">offsetJump</span><span class="pun">;</span></li><br><li class="L6"><span class="pun">}</span></li><br><li class="L7"><span class="pun">}</span></li><br><li class="L8"><span class="kwd">return</span> <span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><br><li class="L9"><span class="pun">}</span></li><br></ol><br></div><br><div class="jspVerticalBar"></div><br></div><br><p>&nbsp;</p><br><h2>Horspool算法</h2><br><p>Horspool算法在做匹配的时候，创造性地从右向左匹配，对后来其他算法有很深的影响。还是那句话，本文会讲很多算法上的东西，但本文重点不是算法，下面还是会过一下Horspool算法的搜索过程，如果难以理解，还是参考其他更详细的资料。依然是示例（<a href="http://www.zhouhua.info/jump/eqpj" target="_blank">http://igm.univ-mlv.fr/~lecroq/string/examples/exp18.html</a>）：</p><br><p>第一次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1   G C A G A G A G</p><br><p>移动步数: 1 (Horspool[A])</p><br><p>第二次尝试 G C A T C G C A G A G A G T A T A C A G T A C G             3 2 1     G C A G A G A G</p><br><p>移动步数: 2 (Horspool[G])</p><br><p>第三次尝试 G C A T C G C A G A G A G T A T A C A G T A C G         5 4 3 2 1     G C A G A G A G</p><br><p>移动步数: 2 (Horspool[G])</p><br><p>第四次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   8 7 6 5 4 3 2 1     G C A G A G A G</p><br><p>先对齐，从模式串的右侧开始匹配，如果完全匹配则结束搜索，否则查看模式串最右边对应的主串字符是什么。找出这个字符在模式串中最后出现的位置（除最末位）距离模式串最后一个字符的距离，如果没有在模式串中出现过，则认为这个距离是模式串的长度。我们可以事先把这个距离表计算出来。</p><br><p>7 6 5 4 3 2 1   G C A G A G A G</p><br><p>⇒</p><br><p>字符 G C A *（其他） 距离 2 6 1 8（模式串的长度）</p><br><p>以上面第三次尝试为例，从右向左匹配了5次后发现匹配失败了，那么这时就看序号1处主串的字符是什么。很容易得到是‘G’，查询上表，‘G’对应的距离是2，那就很简单粗暴地把模式串向右移动两位，再次进行匹配。</p><br><p>上代码：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="kwd">function</span> <span class="typ">HorspoolSearchLoop</span><span class="pun">(</span><span class="pln">mainString</span><span class="pun">,</span><span class="pln"> str</span><span class="pun">){</span></li><br><li class="L1"><span class="kwd">var</span><span class="pln"> mainLength</span><span class="pun">=</span><span class="pln">mainString</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L2"><span class="kwd">var</span><span class="pln"> searchLength </span><span class="pun">=</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L3"><span class="kwd">var</span><span class="pln"> table</span><span class="pun">={};</span></li><br><li class="L4"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> index</span><span class="pun">=</span> <span class="lit">0</span><span class="pun">,</span><span class="pln">l</span><span class="pun">=</span><span class="pln">searchLength</span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">l</span><span class="pun">&gt;</span><span class="pln">index </span><span class="pun">;</span><span class="pln">index</span><span class="pun">++){</span></li><br><li class="L5"><span class="pln"> table</span><span class="pun">[</span><span class="pln">str</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">index</span><span class="pun">)]=</span><span class="pln">l</span><span class="pun">-</span><span class="pln">index</span><span class="pun">;</span></li><br><li class="L6"><span class="pun">}</span></li><br><li class="L7"><span class="kwd">for</span> <span class="pun">(</span><span class="kwd">var</span><span class="pln"> offset </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">,</span><span class="pln"> padding </span><span class="pun">=</span><span class="pln"> mainLength </span><span class="pun">-</span><span class="pln"> searchLength</span><span class="pun">;</span><span class="pln"> offset </span><span class="pun">&lt;</span> <span class="pun">=</span><span class="pln"> padding</span><span class="pun">;){</span></li><br><li class="L8"><span class="kwd">var</span><span class="pln"> rightChar</span><span class="pun">;</span></li><br><li class="L9"><span class="kwd">var</span><span class="pln"> match</span><span class="pun">=</span><span class="kwd">true</span><span class="pun">;</span></li><br><li class="L0"><span class="kwd">var</span><span class="pln"> offsetJump</span><span class="pun">;</span></li><br><li class="L1"><span class="kwd">for</span> <span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> searchLength</span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&gt;=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">–)</span> <span class="pun">{</span></li><br><li class="L2"><span class="kwd">var</span><span class="pln"> searchingChar </span><span class="pun">=</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span></li><br><li class="L3"><span class="kwd">if</span><span class="pun">(</span><span class="pln">i</span><span class="pun">===</span><span class="pln">searchLength</span><span class="pun">-</span><span class="lit">1</span><span class="pun">){</span></li><br><li class="L4"><span class="pln"> rightChar</span><span class="pun">=</span><span class="pln">mainString</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">offset</span><span class="pun">+</span><span class="pln">i</span><span class="pun">);</span></li><br><li class="L5"><span class="pun">}</span></li><br><li class="L6"><span class="kwd">if</span> <span class="pun">(</span><span class="pln">searchingChar </span><span class="pun">!==</span><span class="pln"> mainString</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">offset </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">))</span> <span class="pun">{</span></li><br><li class="L7"><span class="pln"> match</span><span class="pun">=</span><span class="kwd">false</span><span class="pun">;</span></li><br><li class="L8"><span class="pln"> offsetJump </span><span class="pun">=</span><span class="pln"> table</span><span class="pun">[</span><span class="pln">rightChar</span><span class="pun">]||</span><span class="pln">searchLength</span><span class="pun">;</span></li><br><li class="L9"><span class="kwd">break</span><span class="pun">;</span></li><br><li class="L0"><span class="pun">}</span></li><br><li class="L1"><span class="pun">}</span></li><br><li class="L2"><span class="kwd">if</span><span class="pun">(</span><span class="pln">match</span><span class="pun">){</span></li><br><li class="L3"><span class="kwd">return</span><span class="pln"> offset</span><span class="pun">;</span></li><br><li class="L4"><span class="pun">}</span><span class="kwd">else</span><span class="pun">{</span></li><br><li class="L5"><span class="pln"> offset</span><span class="pun">+=</span><span class="pln">offsetJump</span><span class="pun">;</span></li><br><li class="L6"><span class="pun">}</span></li><br><li class="L7"><span class="pun">}</span></li><br><li class="L8"><span class="kwd">return</span> <span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><br><li class="L9"><span class="pun">}</span></li><br></ol><br></div><br></div><br><p>这次只写了非递归的版本，因为递归的版本已经没有写的必要。</p><br><h2>还是来谈javascript</h2><br><p>冲着javascript性能来看这篇文章的同学一定没有兴趣看上来的算法。我一边写一边测试，终于也不愿意再深究其他的一些算法，原本还想把Boyer-Moore算法、Sunday算法也一起讨论讨论，现在看来完全没有必要。为什么？因为javascript实现这些算法的效率实在太！慢！了！</p><br><p>回到开头我们设置的测试场景，我们分别来试验一下搜索10000次，各种算法所要耗费的时间。</p><br><p>递归版（10000次·ms） 循环版（10000次·ms） 暴力算法 87, 1862, 990 35, 1349, 661 KMP算法 106, 3405, 1770 76, 2337, 1194 Horspool算法 187, 2479, 1446 javascript原生方法 9, 101, 47</p><br><p>我想从数据上看，结论是很清晰的。javascript代码的性能确实不高，相比较于循环，递归更是慢了近1倍。javascript在分配内存，数组访问，函数调用等等方面的性能与编译型语言差距很大。如果要实现一个特定的任务，我们更多地应该考虑尽可能地使用原生代码来实现，高级的算法在javascript里似乎并没有多少实用价值。</p><br><p><iframe width="300" height="150" src="http://www.gbtags.com/gb/debugwidget/7d7627df-4296-42eb-b8c5-5da7cffd0b1b.htm"></iframe></p><br><blockquote><p>移过来好多样式丢了……</p></blockquote><br><blockquote><p>blog：<a href="http://www.zhouhua.info/2014/12/16/string/" target="_blank">http://www.zhouhua.info/2014/12/16/string/</a></p></blockquote>





      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/10/21/110ver/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          JavaScript另一种创建实例的方式:返回原型方法
        
      </div>
    </a>
  
  
    <a href="/2015/10/21/112ver/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">教你如何从bilibili下载视频并且提取视频BGM</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="111ver" data-title="javascript实现各种字符串搜索算法" data-url="http://emufan.com/2015/10/21/111ver/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"relsoul"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 Soul
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>
      
    </div>
    
  </div>
  
    
  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="undefined" data-title="" data-url="http://emufan.com/old/2015/10/21/111ver/index.html"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 soul
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>