<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Soul的随笔</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Soul的随笔">
<meta property="og:url" content="http://emufan.com/page/16/index.html">
<meta property="og:site_name" content="Soul的随笔">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Soul的随笔">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Soul的随笔" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?aa495dca780db3bca4942d20b6eda966";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="null" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Soul</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="/#" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/code/" style="font-size: 10px;">code</a> <a href="/tags/jade/" style="font-size: 10px;">jade</a> <a href="/tags/了不起的nodejs/" style="font-size: 20px;">了不起的nodejs</a> <a href="/tags/自言语/" style="font-size: 10px;">自言语</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://emufan.com/">soul随笔</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Soul</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="null" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Soul</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="/#" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-110ver" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/110ver/" class="article-date">
  	<time datetime="2015-10-21T14:57:05.755Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/110ver/">JavaScript另一种创建实例的方式:返回原型方法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&nbsp;</p><br><p>最近在看jquery源码分析..初看了一下发现果然是大神级别的框架,尔等渣渣完全看不懂.</p><br><p>不过根据视频结合来看还是能够学到一点什么的.</p><br><p>至少学到了今天的主题”JavaScript另一种创建实例的方式:返回原型方法”</p><br><p>&nbsp;</p><br><blockquote><br><h2><span style="color: #333333;"><strong>代码</strong></span></h2><br><pre class="lang:default decode:true">function Map(){<br>        return new Map.prototype.init()<br>    }<br><br>    var soul=Map.prototype={<br>        constructor:Map,<br>        ver:”1.2.3”,<br>        valueMap:{}<br>    }<br>    Map.prototype.init=function(){<br><br>    }<br>      Map.prototype.hi=function(){alert(“hello”)}<br>     Map.prototype.init.prototype=Map.prototype;<br>//Map实例是Map.init<br>    //init的原型是Map.prototype<br>    //下面调用Map()方法都是在调用Map.init.prototype=Map.prototype 也就是Map.prototype<br>    //看成Map.prototype就行了.<br>Map().hi()//hello</pre><br></blockquote><br><p>&nbsp;</p><br><blockquote><br><h3><span style="color: #333333;"><strong>分析</strong></span></h3><br><p>首先构造一个函数为 Map返回一个new xxx() 一般我们构造实例都是 var xxx=new xxx() 而这里直接在函数内部就构造好了</p><br><p>返回的是一个构造函数</p><br><p>也就是 Map.prototype.init 如果返回是他构造的话 那么原来Map.prototype上的方法和属性不是都访问不到了嘛？于是巧妙地用了这样一句话</p><br><p>Map.prototype.init.prototype=Map.prototype;</p><br><p>可以理解为init构造函数继承了Map.prototype上的方法和属性</p><br><p>接下来的就应该不用再说了吧</p><br><p>&nbsp;</p></blockquote><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p>





      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-111ver" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/111ver/" class="article-date">
  	<time datetime="2015-10-21T14:57:05.755Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/111ver/">javascript实现各种字符串搜索算法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p></p><p>转自<a href="http://www.gbtags.com/gb/share/4430.htm" target="_blank" rel="external">http://www.gbtags.com/gb/share/4430.htm</a></p><p></p>
<p></p><p>我觉得在前端开发中过多地考虑算法没有太多实际的意义。但这仅仅是我觉得，我并没有证据证明这一点。那为何不来尝试一下，面对一个特定的任务，我将使用不同的算法来实现，看看究竟效率相差多少。今天我想通过字符串搜索这一场景来进行测试。</p><p></p>
<p></p><p>&nbsp;</p><p></p>
<p></p><h2>测试场景</h2><p></p>
<p><ol></ol></p>
<p><li>主字符串就以ABC的一篇文章内容为例，略做修改<br></li></p>
<blockquote><p>There are some times when clicking “like” on a friend’s Facebook status doesn’t feel appropriate. A bad day. A loved one lost. A break up. It only seems natural that a “dislike” button could solve the conundrum of wanting to empathize but not seem inappropriate by clicking “like.” Mark Zuckerberg Puts the Rest of Us to Shame by Speaking Fluent Chinese. Mark Zuckerberg: Facebook Founder and Animal Butcher. Mark Zuckerberg and That Shirt. The idea has been on Mark Zuckerberg’s radar for a while, he said. In 2010, he told ABC News’ Diane Sawyer that that Facebook would “definitely think about” adding a dislike button. “People definitely seem to want it,” Zuckerberg said. Four years later — Zuckerberg says Facebook is still “thinking about” adding the oft-requested button, Zuckerberg says Facebook is still “thinking about” adding the oft-requested button. At a town hall meeting on Thursday, the CEO revealed he has some reservations about the feature. “There are two things that it can mean,” Zuckerberg said of the potential button, which could be used in a mean spirited way or to express empathy. Finding how to limit it to the latter is the challenge. Zuckerberg said he doesn’t want the button to turn into a “voting mechanism” or something that isn’t “socially valuable.” “Often people will tell us they don’t feel comfortable pressing ‘like,’” Zuckerberg said. “What’s the right way to make it so people can easier express a wide range of emotions?” One suggestion percolating online: Roll out the feature under a different name. However, an “empathy button” just may not have the same ring to it as “dislike.”</p></blockquote><br><br><li>模式字符串<br><ul><br><li>靠近起点 friend</li><br><li>靠近终点 button”</li><br><li>靠近中间 Zuckerberg says Facebook is still “thinking about” adding the oft-requested button.</li><br></ul><br></li><br><br><h3>暴力算法</h3><br><p>首先是最原始的做法，主串左侧开始，逐个对比，如果不相同，则主串起始点向后移一位，重复，直到找到。</p><br><p>第一次尝试 G C A T C G C A G A G A G T A T A C A G T A C G 1 2 3 4   G C A G A G A G   第二次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1     G C A G A G A G   第三次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1     G C A G A G A G   第四次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1     G C A G A G A G   第五次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1     G C A G A G A G   Sixth attempt G C A T C G C A G A G A G T A T A C A G T A C G   1 2 3 4 5 6 7 8     G C A G A G A G</p><br><p>以上示例（<a href="http://www.zhouhua.info/jump/0dcj" target="_blank">http://igm.univ-mlv.fr/~lecroq/string/examples/exp3.html</a>）说明了一次暴力搜索的过程。</p><br><p>我用JS模拟了这个算法：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="kwd">var</span><span class="pln"> mainString</span><span class="pun">=</span><span class="str">“”</span><span class="pun">;</span></li><br><li class="L1"><span class="kwd">var</span><span class="pln"> searchString</span><span class="pun">=</span><span class="str">“”</span></li><br><li class="L2"><span class="kwd">function</span><span class="pln"> basicSearch</span><span class="pun">(</span><span class="pln">mainStr</span><span class="pun">,</span><span class="pln"> str</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">){</span></li><br><li class="L3"><span class="kwd">var</span><span class="pln"> mainLength</span><span class="pun">=</span><span class="pln">mainStr</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L4"><span class="kwd">var</span><span class="pln"> searchLength</span><span class="pun">=</span><span class="pln">str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L5"><span class="kwd">if</span><span class="pun">(</span><span class="pln">searchLength</span><span class="pun">&gt;</span><span class="pln">mainLength</span><span class="pun">-</span><span class="pln">offset</span><span class="pun">){</span></li><br><li class="L6"><span class="kwd">return</span> <span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><br><li class="L7"><span class="pun">}</span></li><br><li class="L8"><span class="pln"> offset</span><span class="pun">=</span><span class="pln">offset</span><span class="pun">||</span><span class="lit">0</span><span class="pun">;</span></li><br><li class="L9"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">searchlength</span><span class="pun">&gt;</span><span class="pln">i </span><span class="pun">;</span><span class="pln">i</span><span class="pun">++){</span></li><br><li class="L0"><span class="kwd">if</span><span class="pun">(</span><span class="pln">str</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)!==</span><span class="pln">mainString</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">offset</span><span class="pun">+</span><span class="pln">i</span><span class="pun">)){</span></li><br><li class="L1"><span class="kwd">return</span><span class="pln"> basicSearch</span><span class="pun">(</span><span class="pln">mainStr</span><span class="pun">,</span><span class="pln"> str</span><span class="pun">,</span><span class="pln"> offset</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)</span></li><br><li class="L2"><span class="pun">}</span></li><br><li class="L3"><span class="pun">}</span></li><br><li class="L4"><span class="kwd">return</span><span class="pln"> offset</span><span class="pun">;</span></li><br><li class="L5"><span class="pun">}</span></li><br><li class="L6"><span class="pln">basicSearch</span><span class="pun">(</span><span class="pln">mainString</span><span class="pun">,</span><span class="pln"> searchString</span><span class="pun">);</span></li><br></ol><br></div><br><div class="jspVerticalBar"></div><br></div><br><p>非递归版：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="kwd">function</span><span class="pln"> basicSearchLoop</span><span class="pun">(</span><span class="pln">mainStr</span><span class="pun">,</span><span class="pln"> str</span><span class="pun">){</span></li><br><li class="L1"><span class="kwd">var</span><span class="pln"> mainLength</span><span class="pun">=</span><span class="pln">mainStr</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L2"><span class="kwd">var</span><span class="pln"> searchLength</span><span class="pun">=</span><span class="pln">str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L3"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> offset</span><span class="pun">=</span> <span class="lit">0</span><span class="pun">,</span><span class="pln">padding</span><span class="pun">=</span><span class="pln">mainLength</span><span class="pun">-</span><span class="pln">searchLength</span><span class="pun">;</span><span class="pln">offset</span><span class="pun">&lt;</span> <span class="pun">=</span><span class="pln">padding</span><span class="pun">;</span><span class="pln">offset</span><span class="pun">++)</span> <span class="pun">{</span></li><br><li class="L4"><span class="kwd">var</span><span class="pln"> match</span><span class="pun">=</span><span class="kwd">true</span><span class="pun">;</span></li><br><li class="L5"><span class="kwd">for</span> <span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> searchLength</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span> <span class="pun">{</span></li><br><li class="L6"><span class="kwd">if</span> <span class="pun">(</span><span class="pln">str</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span> <span class="pun">!==</span><span class="pln"> mainString</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">offset </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">))</span> <span class="pun">{</span></li><br><li class="L7"><span class="pln"> match</span><span class="pun">=</span><span class="kwd">false</span><span class="pun">;</span></li><br><li class="L8"><span class="kwd">break</span><span class="pun">;</span></li><br><li class="L9"><span class="pun">}</span></li><br><li class="L0"><span class="pun">}</span></li><br><li class="L1"><span class="kwd">if</span><span class="pun">(</span><span class="pln">match</span><span class="pun">)</span><span class="kwd">return</span><span class="pln"> offset</span><span class="pun">;</span></li><br><li class="L2"><span class="pun">}</span></li><br><li class="L3"><span class="kwd">return</span> <span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><br><li class="L4"><span class="pun">}</span></li><br></ol><br></div><br><div class="jspVerticalBar"></div><br></div><br><p>&nbsp;</p><br><h2>KMP算法（Knuth-Morris-Pratt算法）</h2><br><p>KMP算是字符串搜索算法里的明星。不过本文重点不是介绍算法历史，有兴趣的可以移步百度百科（<a href="http://www.zhouhua.info/jump/yqnx" target="_blank">KMP算法</a>）。这里一样先看一个例子：</p><br><p>第一次尝试 G C A T C G C A G A G A G T A T A C A G T A C G 1 2 3 4   G C A G A G A G</p><br><p>移动步数: 4 (<em>i</em>-<em>kmpNext</em>[<em>i</em>]=3- -1)</p><br><p>第二次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1     G C A G A G A G</p><br><p>移动步数: 1 (<em>i</em>-<em>kmpNext</em>[<em>i</em>]=0- -1)</p><br><p>第三次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1 2 3 4 5 6 7 8     G C A G A G A G</p><br><p>移动步数: 7 (<em>i</em>-<em>kmpNext</em>[<em>i</em>]=8-1)</p><br><p>如果每次发生不一致都要计算一次效率太低，可以考虑将计算结果缓存到一张<strong>部分匹配表</strong>中（也可以在搜索之前先生成此表）。以intristed为例：移动步数: 1 (<em>i</em>-<em>kmpNext</em>[<em>i</em>]=0- -1)</p><br><p><a href="http://www.zhouhua.info/jump/b5bz" target="_blank">原始示例出处</a>。我们看到，这里有一个 kmpNext 数组，这是什么呢？我们慢慢来理解。每一次尝试匹配时，从模式字符串的左端开始对比，如果第i个字符相同，则比较第i+1个；如果不相同，则需要把模式字符串向右移动。移动的位数是算法优劣的关键。每次移动一位是暴力算法的做法。kmp算法有自己独特的移动步数计算方法。</p><br><p>首先引入两个概念：<strong>前缀</strong>和<strong>后缀</strong>。</p><br><ul><br><li>前缀：一个字符串所有头部的集合，不包含自身；</li><br><li>后缀：一个字符串所有尾部的集合，不包含自身。</li><br></ul><br><p>我们看下面的例子（编号从1开始编）：</p><br><p>i n t r i s t i n g 1 2 3 4 5 6 7 8 9   i n t r i s t e d</p><br><p>在模式串8的位置发生了不匹配，那么要计算模式串右移的位数之前，我们先写出位置1~7处的子串intrist的前缀和后缀：</p><br><ul><br><li>前缀：i, in, int, intr, intri, intris, intrist</li><br><li>后缀：t, st, ist, rist, trist, ntrist, intrist</li><br></ul><br><p>我们再定义一个<strong>部分匹配值</strong>的概念：前缀和后缀交集中，长度最长的元素的长度。很显然，这里前缀和后缀没有交集，最长共同元素的长度也就认为是0，那么模式串向右移动（8-0=）8个字符。跟上面的算法（上面是7-(-1)）稍有不同，不过大体意思一样，计算结果也一样。</p><br><p>部分匹配表 模式字符串 i n t r i s t e d 序号 1 2 3 4 5 6 7 8 9 部分匹配值 0 0 0 0 1 0 0 0 0</p><br><p>计算右移位数就可以很容易地从表中计算出来：</p><br><blockquote><p>移动位数=已匹配的位数-已匹配部分的部分匹配值</p></blockquote><br><p>例如在第6个位置s处发现不匹配，那么需要右移5-1=4位。</p><br><p>但这样计算其实并不方便，比如已匹配位数为0的情况很难处理，所以我们可以对部分匹配值做一个修正，每个值减去1，公式也相应调整为：</p><br><blockquote><p>移动位数=不匹配字符的位置-已匹配部分的修正部分匹配值</p></blockquote><br><p>这样这个公式就与上面示例中的公式相同了。</p><br><p>我用JS模拟了这个算法：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="kwd">function</span> <span class="typ">KMPSearch</span><span class="pun">(</span><span class="pln">mainLength</span><span class="pun">,</span><span class="pln">str</span><span class="pun">,</span><span class="pln">offset</span><span class="pun">,</span><span class="kwd">group</span><span class="pun">){</span></li><br><li class="L1"><span class="kwd">var</span><span class="pln"> mainLength</span><span class="pun">=</span><span class="pln">mainString</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L2"><span class="kwd">var</span><span class="pln"> searchLength</span><span class="pun">=</span><span class="pln">str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L3"><span class="kwd">if</span><span class="pun">(</span><span class="pln">searchLength</span><span class="pun">&gt;</span><span class="pln">mainLength</span><span class="pun">-</span><span class="pln">offset</span><span class="pun">){</span></li><br><li class="L4"><span class="kwd">return</span> <span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><br><li class="L5"><span class="pun">}</span></li><br><li class="L6"><span class="pln"> offset</span><span class="pun">=</span><span class="pln">offset</span><span class="pun">||</span><span class="lit">0</span><span class="pun">;</span></li><br><li class="L7"><span class="kwd">group</span><span class="pun">=</span><span class="kwd">group</span><span class="pun">||[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">];</span></li><br><li class="L8"><span class="kwd">var</span><span class="pln"> searchedString</span><span class="pun">=[];</span></li><br><li class="L9"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">searchlength</span><span class="pun">&gt;</span><span class="pln">i </span><span class="pun">;</span><span class="pln">i</span><span class="pun">++){</span></li><br><li class="L0"><span class="kwd">var</span><span class="pln"> searchingChar</span><span class="pun">=</span><span class="pln">str</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span></li><br><li class="L1"><span class="kwd">if</span><span class="pun">(</span><span class="pln">searchingChar</span><span class="pun">!==</span><span class="pln">mainString</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">offset</span><span class="pun">+</span><span class="pln">i</span><span class="pun">)){</span></li><br><li class="L2"><span class="kwd">var</span><span class="pln"> offsetJump</span><span class="pun">;</span></li><br><li class="L3"><span class="kwd">if</span><span class="pun">(</span><span class="kwd">group</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span> <span class="pun">{</span></li><br><li class="L4"><span class="pln"> offsetJump </span><span class="pun">=</span> <span class="kwd">group</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></li><br><li class="L5"><span class="pun">}</span><span class="kwd">else</span><span class="pun">{</span></li><br><li class="L6"><span class="pln"> offsetJump </span><span class="pun">=</span> <span class="kwd">next</span><span class="pun">(</span><span class="pln">searchedString</span><span class="pun">);</span></li><br><li class="L7"><span class="kwd">group</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]=</span><span class="pln">offsetJump</span><span class="pun">;</span></li><br><li class="L8"><span class="pun">}</span></li><br><li class="L9"><span class="kwd">return</span> <span class="typ">KPMSearch</span><span class="pun">(</span><span class="pln">mainLength</span><span class="pun">,</span><span class="pln">str</span><span class="pun">,</span><span class="pln">offset</span><span class="pun">+</span><span class="pln">offsetJump</span><span class="pun">,</span><span class="kwd">group</span><span class="pun">);</span></li><br><li class="L0"><span class="pun">}</span></li><br><li class="L1"><span class="pln"> searchedString</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">searchingChar</span><span class="pun">);</span></li><br><li class="L2"><span class="pun">}</span></li><br><li class="L3"><span class="kwd">return</span><span class="pln"> offset</span><span class="pun">;</span></li><br><li class="L4"><span class="pun">}</span></li><br><li class="L5"><span class="kwd">function</span> <span class="kwd">next</span><span class="pun">(</span><span class="pln">chars</span><span class="pun">){</span></li><br><li class="L6"><span class="kwd">var</span><span class="pln"> length</span><span class="pun">=</span><span class="pln">chars</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L7"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i</span><span class="pun">=</span><span class="pln">length</span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&gt;</span><span class="lit">0</span><span class="pun">;</span><span class="pln">i</span><span class="pun">–){</span></li><br><li class="L8"><span class="kwd">var</span><span class="pln"> isMatch</span><span class="pun">=</span><span class="kwd">true</span><span class="pun">;</span></li><br><li class="L9"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span> <span class="pun">;</span><span class="pln">j</span><span class="pun">&lt;</span> <span class="pun">=</span><span class="pln">i</span><span class="pun">;</span><span class="pln">j</span><span class="pun">++){</span></li><br><li class="L0"><span class="kwd">if</span><span class="pun">(</span><span class="pln">chars</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]!==</span><span class="pln">chars</span><span class="pun">[</span><span class="pln">length</span><span class="pun">-</span><span class="pln">i</span><span class="pun">+</span><span class="pln">j</span><span class="pun">]){</span></li><br><li class="L1"><span class="pln"> isMatch</span><span class="pun">=</span><span class="kwd">false</span><span class="pun">;</span></li><br><li class="L2"><span class="kwd">break</span><span class="pun">;</span></li><br><li class="L3"><span class="pun">}</span></li><br><li class="L4"><span class="pun">}</span></li><br><li class="L5"><span class="kwd">if</span><span class="pun">(</span><span class="pln">isMatch</span><span class="pun">)</span><span class="kwd">return</span><span class="pln"> length</span><span class="pun">-</span><span class="pln">i</span><span class="pun">;</span></li><br><li class="L6"><span class="pun">}</span></li><br><li class="L7"><span class="kwd">return</span><span class="pln"> length</span><span class="pun">;</span></li><br><li class="L8"><span class="pun">}</span></li><br></ol><br></div><br><div class="jspVerticalBar"></div><br></div><br><p>非递归版：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="kwd">function</span> <span class="typ">KMPSearchLoop</span><span class="pun">(</span><span class="pln">mainStr</span><span class="pun">,</span><span class="pln"> str</span><span class="pun">)</span> <span class="pun">{</span></li><br><li class="L1"><span class="kwd">var</span><span class="pln"> mainLength</span><span class="pun">=</span><span class="pln">mainString</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L2"><span class="kwd">var</span><span class="pln"> searchLength </span><span class="pun">=</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L3"><span class="kwd">for</span> <span class="pun">(</span><span class="kwd">var</span><span class="pln"> offset </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">,</span><span class="pln"> padding </span><span class="pun">=</span><span class="pln"> mainLength </span><span class="pun">-</span><span class="pln"> searchLength</span><span class="pun">,</span> <span class="kwd">group</span> <span class="pun">=</span> <span class="pun">[</span><span class="lit">1</span><span class="pun">,</span> <span class="lit">1</span><span class="pun">];</span><span class="pln"> offset </span><span class="pun">&lt;</span> <span class="pun">=</span><span class="pln"> padding</span><span class="pun">;){</span></li><br><li class="L4"><span class="kwd">var</span><span class="pln"> searchedString </span><span class="pun">=</span> <span class="pun">[];</span></li><br><li class="L5"><span class="kwd">var</span><span class="pln"> match</span><span class="pun">=</span><span class="kwd">true</span><span class="pun">;</span></li><br><li class="L6"><span class="kwd">var</span><span class="pln"> offsetJump</span><span class="pun">;</span></li><br><li class="L7"><span class="kwd">for</span> <span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> searchLength</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span> <span class="pun">{</span></li><br><li class="L8"><span class="kwd">var</span><span class="pln"> searchingChar </span><span class="pun">=</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span></li><br><li class="L9"><span class="kwd">if</span> <span class="pun">(</span><span class="pln">searchingChar </span><span class="pun">!==</span><span class="pln"> mainString</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">offset </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">))</span> <span class="pun">{</span></li><br><li class="L0"><span class="pln"> match</span><span class="pun">=</span><span class="kwd">false</span><span class="pun">;</span></li><br><li class="L1"><span class="kwd">if</span> <span class="pun">(</span><span class="kwd">group</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span> <span class="pun">{</span></li><br><li class="L2"><span class="pln"> offsetJump </span><span class="pun">=</span> <span class="kwd">group</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></li><br><li class="L3"><span class="pun">}</span></li><br><li class="L4"><span class="kwd">else</span> <span class="pun">{</span></li><br><li class="L5"><span class="pln"> offsetJump </span><span class="pun">=</span> <span class="kwd">next</span><span class="pun">(</span><span class="pln">searchedString</span><span class="pun">);</span></li><br><li class="L6"><span class="kwd">group</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span> <span class="pun">=</span><span class="pln"> offsetJump</span><span class="pun">;</span></li><br><li class="L7"><span class="pun">}</span></li><br><li class="L8"><span class="kwd">break</span><span class="pun">;</span></li><br><li class="L9"><span class="pun">}</span></li><br><li class="L0"><span class="pln"> searchedString</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">searchingChar</span><span class="pun">);</span></li><br><li class="L1"><span class="pun">}</span></li><br><li class="L2"><span class="kwd">if</span><span class="pun">(</span><span class="pln">match</span><span class="pun">){</span></li><br><li class="L3"><span class="kwd">return</span><span class="pln"> offset</span><span class="pun">;</span></li><br><li class="L4"><span class="pun">}</span><span class="kwd">else</span><span class="pun">{</span></li><br><li class="L5"><span class="pln"> offset</span><span class="pun">+=</span><span class="pln">offsetJump</span><span class="pun">;</span></li><br><li class="L6"><span class="pun">}</span></li><br><li class="L7"><span class="pun">}</span></li><br><li class="L8"><span class="kwd">return</span> <span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><br><li class="L9"><span class="pun">}</span></li><br></ol><br></div><br><div class="jspVerticalBar"></div><br></div><br><p>&nbsp;</p><br><h2>Horspool算法</h2><br><p>Horspool算法在做匹配的时候，创造性地从右向左匹配，对后来其他算法有很深的影响。还是那句话，本文会讲很多算法上的东西，但本文重点不是算法，下面还是会过一下Horspool算法的搜索过程，如果难以理解，还是参考其他更详细的资料。依然是示例（<a href="http://www.zhouhua.info/jump/eqpj" target="_blank">http://igm.univ-mlv.fr/~lecroq/string/examples/exp18.html</a>）：</p><br><p>第一次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   1   G C A G A G A G</p><br><p>移动步数: 1 (Horspool[A])</p><br><p>第二次尝试 G C A T C G C A G A G A G T A T A C A G T A C G             3 2 1     G C A G A G A G</p><br><p>移动步数: 2 (Horspool[G])</p><br><p>第三次尝试 G C A T C G C A G A G A G T A T A C A G T A C G         5 4 3 2 1     G C A G A G A G</p><br><p>移动步数: 2 (Horspool[G])</p><br><p>第四次尝试 G C A T C G C A G A G A G T A T A C A G T A C G   8 7 6 5 4 3 2 1     G C A G A G A G</p><br><p>先对齐，从模式串的右侧开始匹配，如果完全匹配则结束搜索，否则查看模式串最右边对应的主串字符是什么。找出这个字符在模式串中最后出现的位置（除最末位）距离模式串最后一个字符的距离，如果没有在模式串中出现过，则认为这个距离是模式串的长度。我们可以事先把这个距离表计算出来。</p><br><p>7 6 5 4 3 2 1   G C A G A G A G</p><br><p>⇒</p><br><p>字符 G C A *（其他） 距离 2 6 1 8（模式串的长度）</p><br><p>以上面第三次尝试为例，从右向左匹配了5次后发现匹配失败了，那么这时就看序号1处主串的字符是什么。很容易得到是‘G’，查询上表，‘G’对应的距离是2，那就很简单粗暴地把模式串向右移动两位，再次进行匹配。</p><br><p>上代码：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="kwd">function</span> <span class="typ">HorspoolSearchLoop</span><span class="pun">(</span><span class="pln">mainString</span><span class="pun">,</span><span class="pln"> str</span><span class="pun">){</span></li><br><li class="L1"><span class="kwd">var</span><span class="pln"> mainLength</span><span class="pun">=</span><span class="pln">mainString</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L2"><span class="kwd">var</span><span class="pln"> searchLength </span><span class="pun">=</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></li><br><li class="L3"><span class="kwd">var</span><span class="pln"> table</span><span class="pun">={};</span></li><br><li class="L4"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> index</span><span class="pun">=</span> <span class="lit">0</span><span class="pun">,</span><span class="pln">l</span><span class="pun">=</span><span class="pln">searchLength</span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">l</span><span class="pun">&gt;</span><span class="pln">index </span><span class="pun">;</span><span class="pln">index</span><span class="pun">++){</span></li><br><li class="L5"><span class="pln"> table</span><span class="pun">[</span><span class="pln">str</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">index</span><span class="pun">)]=</span><span class="pln">l</span><span class="pun">-</span><span class="pln">index</span><span class="pun">;</span></li><br><li class="L6"><span class="pun">}</span></li><br><li class="L7"><span class="kwd">for</span> <span class="pun">(</span><span class="kwd">var</span><span class="pln"> offset </span><span class="pun">=</span> <span class="lit">0</span><span class="pun">,</span><span class="pln"> padding </span><span class="pun">=</span><span class="pln"> mainLength </span><span class="pun">-</span><span class="pln"> searchLength</span><span class="pun">;</span><span class="pln"> offset </span><span class="pun">&lt;</span> <span class="pun">=</span><span class="pln"> padding</span><span class="pun">;){</span></li><br><li class="L8"><span class="kwd">var</span><span class="pln"> rightChar</span><span class="pun">;</span></li><br><li class="L9"><span class="kwd">var</span><span class="pln"> match</span><span class="pun">=</span><span class="kwd">true</span><span class="pun">;</span></li><br><li class="L0"><span class="kwd">var</span><span class="pln"> offsetJump</span><span class="pun">;</span></li><br><li class="L1"><span class="kwd">for</span> <span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> searchLength</span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&gt;=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">–)</span> <span class="pun">{</span></li><br><li class="L2"><span class="kwd">var</span><span class="pln"> searchingChar </span><span class="pun">=</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span></li><br><li class="L3"><span class="kwd">if</span><span class="pun">(</span><span class="pln">i</span><span class="pun">===</span><span class="pln">searchLength</span><span class="pun">-</span><span class="lit">1</span><span class="pun">){</span></li><br><li class="L4"><span class="pln"> rightChar</span><span class="pun">=</span><span class="pln">mainString</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">offset</span><span class="pun">+</span><span class="pln">i</span><span class="pun">);</span></li><br><li class="L5"><span class="pun">}</span></li><br><li class="L6"><span class="kwd">if</span> <span class="pun">(</span><span class="pln">searchingChar </span><span class="pun">!==</span><span class="pln"> mainString</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">offset </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">))</span> <span class="pun">{</span></li><br><li class="L7"><span class="pln"> match</span><span class="pun">=</span><span class="kwd">false</span><span class="pun">;</span></li><br><li class="L8"><span class="pln"> offsetJump </span><span class="pun">=</span><span class="pln"> table</span><span class="pun">[</span><span class="pln">rightChar</span><span class="pun">]||</span><span class="pln">searchLength</span><span class="pun">;</span></li><br><li class="L9"><span class="kwd">break</span><span class="pun">;</span></li><br><li class="L0"><span class="pun">}</span></li><br><li class="L1"><span class="pun">}</span></li><br><li class="L2"><span class="kwd">if</span><span class="pun">(</span><span class="pln">match</span><span class="pun">){</span></li><br><li class="L3"><span class="kwd">return</span><span class="pln"> offset</span><span class="pun">;</span></li><br><li class="L4"><span class="pun">}</span><span class="kwd">else</span><span class="pun">{</span></li><br><li class="L5"><span class="pln"> offset</span><span class="pun">+=</span><span class="pln">offsetJump</span><span class="pun">;</span></li><br><li class="L6"><span class="pun">}</span></li><br><li class="L7"><span class="pun">}</span></li><br><li class="L8"><span class="kwd">return</span> <span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></li><br><li class="L9"><span class="pun">}</span></li><br></ol><br></div><br></div><br><p>这次只写了非递归的版本，因为递归的版本已经没有写的必要。</p><br><h2>还是来谈javascript</h2><br><p>冲着javascript性能来看这篇文章的同学一定没有兴趣看上来的算法。我一边写一边测试，终于也不愿意再深究其他的一些算法，原本还想把Boyer-Moore算法、Sunday算法也一起讨论讨论，现在看来完全没有必要。为什么？因为javascript实现这些算法的效率实在太！慢！了！</p><br><p>回到开头我们设置的测试场景，我们分别来试验一下搜索10000次，各种算法所要耗费的时间。</p><br><p>递归版（10000次·ms） 循环版（10000次·ms） 暴力算法 87, 1862, 990 35, 1349, 661 KMP算法 106, 3405, 1770 76, 2337, 1194 Horspool算法 187, 2479, 1446 javascript原生方法 9, 101, 47</p><br><p>我想从数据上看，结论是很清晰的。javascript代码的性能确实不高，相比较于循环，递归更是慢了近1倍。javascript在分配内存，数组访问，函数调用等等方面的性能与编译型语言差距很大。如果要实现一个特定的任务，我们更多地应该考虑尽可能地使用原生代码来实现，高级的算法在javascript里似乎并没有多少实用价值。</p><br><p><iframe width="300" height="150" src="http://www.gbtags.com/gb/debugwidget/7d7627df-4296-42eb-b8c5-5da7cffd0b1b.htm"></iframe></p><br><blockquote><p>移过来好多样式丢了……</p></blockquote><br><blockquote><p>blog：<a href="http://www.zhouhua.info/2014/12/16/string/" target="_blank">http://www.zhouhua.info/2014/12/16/string/</a></p></blockquote>





      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-112ver" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/112ver/" class="article-date">
  	<time datetime="2015-10-21T14:57:05.755Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/112ver/">教你如何从bilibili下载视频并且提取视频BGM</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&nbsp;</p><br><blockquote><br><h1><span style="color: #993366;"><strong>下载bilibili视频</strong></span></h1><br><p>&nbsp;</p><br><p>The First 在bilibili找到你想要下载的视频 比如: <a href="http://www.bilibili.com/video/av2299170/" target="_blank" rel="external">http://www.bilibili.com/video/av2299170/</a></p><br><p>然后再bilibili后面加上jj 最后拼起来就是<a href="http://www.bilibilijj.com/video/av2299170/" target="_blank" rel="external">http://www.bilibilijj.com/video/av2299170/</a></p><br><p><a href="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-05.png" target="_blank" rel="external"><img class=" size-medium wp-image-460 alignnone" src="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-05.png" data-original="http://www.old.com/wp-content/uploads/2015/05/1-300x66.png" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt="1" width="300" height="66"></a></p><br><p>&nbsp;</p><br><p>点击MP4进行下载</p><br><p>&nbsp;</p><br><h1><span style="color: #993366;"><strong><span style="color: #993366;">录制保存</span></strong></span></h1><br><p>有时候某些视频并不能下载 所以这里用到了Bandicam这款视频软件进行录制后保存</p><br><p>关于Bandicam下载可以去Bandicam吧进行下载</p><br><p><a href="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-05.png" target="_blank" rel="external"><img class=" size-medium wp-image-461 alignnone" src="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-05.png" data-original="http://www.old.com/wp-content/uploads/2015/05/2-280x300.png" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt="2" width="280" height="300"></a> 这里只稍微说一下.一般录制出来的视频比较大.如果有需要后期开一章如何压制视频的文章吧</p><br><p>&nbsp;</p></blockquote><br><p>&nbsp;</p><br><blockquote><br><h1><span style="color: #993366;"><strong>截取视频音乐</strong></span></h1><br><p>截取视频音乐有很多种方式.如果你愿意一边看视频一边截取可以采用potplay播放器的录制功能</p><br><h4><span style="color: #333333;">使用potplay </span></h4><br><p>下载地址:<a href="http://potplayer.daum.net/?lang=zh_CN" target="_blank" rel="external">http://potplayer.daum.net/?lang=zh_CN</a></p><br><p><a href="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-05.png" target="_blank" rel="external"><img class=" size-medium wp-image-462 alignnone" src="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-05.png" data-original="http://www.old.com/wp-content/uploads/2015/05/3-300x185.png" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt="3" width="300" height="185"></a></p><br><p>&nbsp;</p><br><p>打开个视频文件 按TAB键既可以看到视频的一些相关信息</p><br><p><a href="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-05.png" target="_blank" rel="external"><img class=" size-medium wp-image-463 alignnone" src="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-05.png" data-original="http://www.old.com/wp-content/uploads/2015/05/4-300x219.png" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt="4" width="300" height="219"></a></p><br><p>然后开始录制 右键选择 声音-音轨-录制</p><br><p><a href="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-05.png" target="_blank" rel="external"><img class=" size-medium wp-image-464 alignnone" src="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-05.png" data-original="http://www.old.com/wp-content/uploads/2015/05/5-300x276.png" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt="5" width="300" height="276"></a></p><br><p>&nbsp;</p><br><p>这里可以选择很多种格式录制音频.. 到此使用potplay录制音频就结束了</p><br><p>&nbsp;</p><br><h1><span style="color: #333333;"><strong>使用视频制作软件截取音频</strong></span></h1><br><p>..这个我就不多说了..</p><br><p>另外网上还有一大堆如何截取视频音频的教程..大家可以多去了解一下</p><br><p>&nbsp;</p><br><p>&nbsp;</p></blockquote><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p>





      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-113ver" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/113ver/" class="article-date">
  	<time datetime="2015-10-21T14:57:05.755Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/113ver/">CSS 预处理语言LESS简单实用教程与笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><blockquote></blockquote></p>
<p></p><h1><span style="color: #333333; font-family: arial, helvetica, sans-serif;"><strong>前言</strong></span></h1><p></p>
<p>CSS 预处理语言有两种 一种是今天的LESS 还有一种是SASS…至于学哪种..看个人喜好咯.其实都差不多</p><br><p>&nbsp;</p><br><h1><span style="color: #333333;"><strong>何为CSS预处理语言？</strong></span></h1><br><p>首先我们知道CSS是没有变量这一说的,也没有运算,逻辑判断…. 于是某个想要偷懒的程序猿开发出了一门预处理语言,满足了世界上一大批想偷懒的程序猿,这是一件普大喜奔的事</p><br><p>&nbsp;</p><br><h1><span style="color: #333333;"><strong>它能干什么？</strong></span></h1><br><p><del>不管它能不能干什么.反正不能干你就是了.</del></p><br><p>我们可以定义多个变量方便后面重复编写的时候调用,我们也可以编写一个class方便后续文本继承这个class</p><br><p>&nbsp;</p><br><blockquote><br><h1><span style="color: #333333;"><strong>下载与编译</strong></span></h1><br><p>&nbsp;</p><br><h3 style="text-align: center;"><strong>编译</strong></h3><br><p>编译的方式有很多种,nodejs可以编译,客户端(浏览器)也可以编译,这里我推荐使用咋们自己人开发的一款编译工具叫koala</p><br><p>官方网址为:<a href="http://koala-app.com/" target="_blank" rel="external">http://koala-app.com/</a></p><br><p>下载 安装就不多说了.</p><br><p>首先新建一个文件夹 less(名字自己取)然后新建一个文件名为.less的文件 比如test.less</p><br><p>然后打开这款软件,把文件夹拖入或者添加到这里</p><br><p><a href="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-11.png" target="_blank" rel="external"><img class=" size-medium wp-image-471 alignnone" src="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-11.png" data-original="http://www.old.com/wp-content/uploads/2015/05/11-300x185.png" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt="1" width="300" height="185"></a></p><br><p>&nbsp;</p><br><p>添加 文件夹后会出现</p><br><p>这时候要做的是 设置文件输出路径</p><br><p><a href="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-21.png" target="_blank" rel="external"><img class=" size-medium wp-image-472 alignnone" src="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-21.png" data-original="http://www.old.com/wp-content/uploads/2015/05/21-300x187.png" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt="2" width="300" height="187"></a></p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>1:选择你要编译的less文件</p><br><p>2:选择输出方式</p><br><p>3:点击立即编译</p><br><p>4:HTML导出编译的css</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p><a href="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-31.png" target="_blank" rel="external"><img class="  alignnone wp-image-473 " src="http://7xi9fb.com1.z0.glb.clouddn.com/mm/imgs/2015-10-21-31.png" data-original="http://www.old.com/wp-content/uploads/2015/05/31.png" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt="3" width="572" height="354"></a></p><br><p>&nbsp;</p><br><p>OK这时候你就编译了一个less了</p><br><p>&nbsp;</p><br><h1><span style="color: #333333;"><strong>小贴士</strong></span></h1><br><p>只要不关闭Koala这个软件 那么less与css都是动态即时编译 也就是说直接在less文件里面写完后保存并不需要再次执行编译.</p><br><p>&nbsp;</p><br><p>&nbsp;</p></blockquote><br><p>&nbsp;</p><br><p>&nbsp;</p><br><blockquote><br><h1 style="text-align: center;"> <strong><span style="color: #333333;">LESS简单教程</span></strong></h1><br><h3><span style="color: #993366;"><strong>变量</strong></span></h3><br><pre class="lang:default decode:true ">@a:#eee;<br>@testW:300px;<br></pre><br><p>用@开头来定义一个变量</p><br><h3><span style="color: #993366;"><strong>使用变量</strong></span></h3><br><pre class="lang:default decode:true">body{<br>    background: @a;<br>}</pre><br><p>&nbsp;</p><br><h3><span style="color: #993366;"><strong>继承/混合</strong></span></h3><br><pre class="lang:default decode:true ">.box{<br>    width: @testW;<br>    height:@testW;<br>    background: red;<br>    .border;<br>}<br><br>//混合<br>.border{<br>    border:5px solid pink;<br>}</pre><br><p>首先我们定义了一个class 然后再.box里引用了这个类 .border这样就实现了继承 具体的可以看看编译后的CSS哦</p><br><p>&nbsp;</p><br><h3><span style="color: #993366;"><strong>混合传参</strong></span></h3><br><pre class="lang:default decode:true ">.border_02(@border_w){<br>    border: solid yellow @border_w;<br>}<br>.test_hunhe{<br>    .border_02(30px);<br>}</pre><br><p>.border_o2中声明了一个不带默认值的参数,在.test_hunhe调用的时候需要传递具体的参数</p><br><p>&nbsp;</p><br><h3><span style="color: #993366;"><strong>混合传参-给定默认值</strong></span></h3><br><pre class="lang:default decode:true ">.border_03(@border_w:10px){<br>    border:solid blue @border_w;<br>}<br>.test_hunhe03{<br>    .border_03();<br>}<br></pre><br><p>.test<em>hunhe03调用的时候不带参值.默认就是10px</em></p><br><p>&nbsp;</p><br><h3><span style="color: #993366;"><strong>标记锚点</strong></span></h3><br><pre class="lang:default decode:true">.Col(red,@a:red){<br>    color:@a;<br><br>}<br><br>.Col(blue,@a:blue){<br>    color:@a<br>}<br>//默认设置..PS:需要把参数全部传递进去<br>.Col(@,@a:null){<br>        background: #147845;<br>}<br>.test_04{<br> .Col(blue);<br>}</pre><br><p>最后生成的test_04为 background: #147845; color:blue</p><br><p>&nbsp;</p><br><h3><span style="color: #993366;">嵌套</span></h3><br><pre class="lang:default decode:true">.magic{<br>    //magic下的li<br>    li{<br>        //li下的a<br>        a{<br>            .Col(blue);<br>            //&amp;代表上一级选择器的元素<br>            &amp;:hover{<br>                .Col(red)<br>            }<br>        }<br>    }<br>}<br><br></pre><br><p>&nbsp;</p><br><h3><span style="color: #993366;"><strong>&amp;选择符</strong></span></h3><br><pre class="lang:default decode:true">a{<br>            .Col(blue);<br>            //&amp;代表上一级选择器的元素<br>            &amp;:hover{<br>                .Col(red)<br>            }</pre><br><p>&nbsp;</p><br><h3><span style="color: #993366;"><strong> 运算</strong></span></h3><br><pre class="lang:default decode:true ">.sum{<br><br>    //<br>    .box();<br>    //继承box的样式<br>    //同时在后面又定义了个Width覆盖了box的width<br>    //运算记得用空格隔开..<br>    width:@testW - 100px;<br><br>}</pre><br><p>&nbsp;</p><br><h3><span style="color: #993366;"><strong>避免编译</strong></span></h3><br><pre class="lang:default decode:true ">//避免编译<br><br>.test_03{<br>    //用~””来避免编译<br>    width:~”cacl(300px-30px)”;<br><br>}<br><br>//! important<br>//css中用来定义层级<br>.test_improtant{<br> .box()!important;<br>}<br></pre><br><p>&nbsp;</p></blockquote><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p>





      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-114ver" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/114ver/" class="article-date">
  	<time datetime="2015-10-21T14:57:05.755Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/114ver/">超炫js动画库:snabbt 简单使用教程 snabbt.js</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p></p><h4><span style="color: #000000;"><strong>..博主第一次研究一个js库的使用方法..因为英文完全是个战五渣.所以不能很深入的研究..有说的不对的地方欢迎批评指正.</strong></span></h4><p></p>
<p>&nbsp;</p><br><blockquote><br><h2><span style="color: #800080;"><span style="color: #000000;">演示地址:<span style="color: #993366;"><a style="color: #993366;" href="http://www.old.com/demo/snabbt_anim.html" target="_blank">点击演示</a></span></span></span></h2><br><h2><span style="color: #800080;"><span style="color: #000000;">官方地址:</span><span style="color: #993366;"><a style="color: #993366;" href="http://daniel-lundin.github.io/snabbt.js/" target="_blank">http://daniel-lundin.github.io/snabbt.js/</a></span></span></h2><br></blockquote><br><p>&nbsp;</p><br><p><strong>PS：网上也有很多相关库的介绍和使用.这里只是简单的说说</strong></p><br><p>&nbsp;</p><br><blockquote><br><h2 style="text-align: center;"><span style="color: #333333;"><strong>库的加载与使用</strong></span></h2><br><h3><span style="color: #993366;"><strong> 有Jquery</strong></span></h3><br><p>先加载Jquery再加载库</p><br><pre class="">$(elem).snabbt({})<br></pre><br><h3><span style="color: #993366;"><strong>无Jquery</strong></span></h3><br><pre class="">snabbt(elem,{})</pre><br><p>&nbsp;</p><br><h2 style="text-align: center;"><span style="color: #333333;"><strong>链式操作</strong></span></h2><br><h3><span style="color: #993366;"><strong>有Jquery</strong></span></h3><br><pre class="">$(elem).snabbt({}).snabbt({})</pre><br><p>&nbsp;</p><br><h3><span style="color: #993366;"><strong>无Jquery</strong></span></h3><br><p>链式操作只需要获取一次元素</p><br><pre class="">snabbt(elem,{}).snabbt({})</pre><br><p>&nbsp;</p></blockquote><br><p>&nbsp;</p><br><blockquote><br><h2 style="text-align: center;"><span style="color: #333333;"><strong>一个旋转移动的动画</strong></span></h2><br><pre class="lang:default decode:true">$(“#sna_rotate”).click(function(){<br>                $(this).snabbt({<br>                    //移动 position:[x,y,z]<br>                    position:[200,100,0],<br>                    //旋转 rotation:[x,y,z]<br>                    //Math.PI正好是一周.<br>                    rotation:[0,Math.PI,0],<br>                    //duration:持续时间(ms)<br>                    duration: 100,<br>                    //动画效果 可以参考css中的动画<br>                    //当设置为spring duration无效<br>                    easing: ‘ease’<br>                }).snabbt({<br>                    position:[0,0,0],<br>                    rotation:[0,0,0],<br>                    easing:”spring”,<br>                    //控制spring弹性常数<br>                     springConstant: 0.4,<br>                     //控制spring回弹.设置为1就根本停不下来<br>                  springDeceleration: 0.9,<br>                  //控制spring回弹时间.(可以把数字设置为1000然后实践理解下应该就简单了)<br>                  springMass: 8,<br><br>                })<br>            })</pre><br><p>从上面这串代码来分析</p><br><p>&nbsp;</p><br><p>首先可以得知snabbt传递的是一个对象,对象里面再写属性,snabbt支持的属性可以在本页最下方进行查表,也可以去官方网站最下方查表</p><br><p>&nbsp;</p><br><p><span style="color: #993366;"><strong>移动</strong></span></p><br><p>//移动 position:[x,y,z]</p><br><p>position:[200,100,0],</p><br><p>&nbsp;</p><br><p><span style="color: #993366;"><strong>旋转</strong></span></p><br><p class="lang:default decode:true ">//旋转 rotation:[x,y,z]</p><br><p class="lang:default decode:true ">//Math.PI正好是一周</p><br><p class="lang:default decode:true "> rotation:[0,Math.PI,0],</p><br><p class="lang:default decode:true "><br></p><p class="lang:default decode:true "><span style="color: #993366;"><strong>持续时间</strong></span></p><br><p class="lang:default decode:true  ">//duration:持续时间(ms)</p><br><p class="lang:default decode:true  ">duration: 100,</p><br><p class="lang:default decode:true  "><br></p><p class="lang:default decode:true  "><span style="color: #993366;"><strong>动画效果</strong></span></p><br><p class="lang:default decode:true ">//动画效果 可以参考css中的动画</p><br><p class="lang:default decode:true ">//当设置为spring duration无效</p><br><p class="lang:default decode:true ">easing: ‘ease’</p><br><p class="lang:default decode:true  ">PS：官方提供了几种自带的动画效果,当然也可以自己写动画效果</p><br><p class="lang:default decode:true  "><br></p><p>&nbsp;</p><br><p><span style="color: #993366;"><strong>回弹设置</strong></span></p><br><p class="lang:default decode:true ">//控制spring弹性常数</p><br><p class="lang:default decode:true ">springConstant: 0.4,</p><br><p class="lang:default decode:true ">//控制摆动.设置为1就根本停不下来</p><br><p class="lang:default decode:true ">springDeceleration: 0.9,</p><br><p class="lang:default decode:true ">//控制spring回弹时间.(可以把数字设置为1000然后实践理解下应该就简单了)</p><br><p class="lang:default decode:true ">springMass: 8,</p><br><p> PS：这块我也没搞懂..嘛嘛.大家多实践下获得自己想要的效果就行了.</p><br><hr><br><p>OK,现在来说说上面代码的意思.</p><br><p>首先获取到一个元素.并且给这个元素添加上动画效果</p><br><p>当点击这个元素的时候.向右移动200px,向下移动100px</p><br><p>同时在移动的时候,在x轴上翻转</p><br><p>整个动画完成时间是1秒.动画效果是ease</p><br><p>当第一个动画执行完毕后再执行第二个动画</p><br><p>首先元素会从第一个动画完成后的位置移动到初始位置</p><br><p>同时设置的动画效果是spring,动画时间会在元素达到平衡时结束</p><br><p>&nbsp;</p></blockquote><br><p>&nbsp;</p><br><p>&nbsp;</p><br><blockquote><br><h2 style="text-align: center;"><span style="color: #333333;"><strong>自定义ease动画效果</strong></span></h2><br><pre class="lang:default decode:true">snabbtAnim.prototype.custom=function(){<br>            $(“#sna_custom”).click(function(){<br>                $(this).snabbt({<br>                    position:[100,0,0],<br>                    duration:1000,<br>                    //自定义ease动画效果<br>                    easing:function(value){<br>                     return value + 0.3 <em> Math.sin(2</em>Math.PI <em> value);<br>                    }<br>                }).snabbt({<br>                    position:[0,0,0],<br>                    easing:”ease”<br>                })<br><br><br>            })<br>        }</em></pre><br><p>&nbsp;</p><br><p>自定义一个easing效果.</p><br><p class="lang:default decode:true  ">easing:function(value){ return value + 0.3  Math.sin(2<em>Math.PI </em> value); }</p><br><p> 传递一个value值 返回一个……..大家自己看吧.哈哈哈哈哈</p><br><p>&nbsp;</p><br><p>&nbsp;</p></blockquote><br><p>&nbsp;</p><br><p>&nbsp;</p><br><blockquote><p>&nbsp;</p><br><h3 style="text-align: center;"><span style="color: #333333;">叠加动画</span></h3><br><pre class="lang:default decode:true ">snabbtAnim.prototype.overly=function(){<br>            $(“#sna_overly”).click(function(){<br>                $(this).snabbt({<br>                    //叠加两个动画 一个是向左移动 一个是抖动<br>                    valueFeeder: function(i, matrix) {<br>                        //i在0~1中变化 函数返回的是一个mateix矩阵 具体的可以看官网矩阵<br>                    var x = Math.sin(i<em>Math.PI);<br>                    console.log(i)<br>                    return matrix.rotateZ(Math.sin(6</em>i<em>Math.PI)).translate(x</em>200, 0, 0);<br>                  },<br>                  duration: 1000<br>                })<br>            })<br>        }</pre><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>以valueFeeder为属性名 后面传递的是一个匿名函数</p><br><p>//i在0~1中变化开始是0在动画执行的途中不断变大最后为1</p><br><p>函数返回的是一个mateix矩阵 具体的可以看官网矩阵<br><br>var x = Math.sin(i<em>Math.PI);<br><br>console.log(i)<br><br>return matrix.rotateZ(Math.sin(6</em>i<em>Math.PI)).translate(x</em>200, 0, 0);</p><br><p>看最后的return返回值</p><br><p>返回一个matrix矩阵 rotateZ是在Z轴(垂直与我们屏幕)翻转同时后面加了一个translate移动 因为只写了x轴所以只会在x轴上移动</p><br><p>这样就在一个属性上叠加了两个动画,同时可以很好的控制这两个动画</p><br><p>&nbsp;</p></blockquote><br><p>&nbsp;</p><br><blockquote><br><h2 style="text-align: center;"><span style="color: #333333;"><strong>关注动画</strong></span></h2><br><pre class="lang:default decode:true">$(“#sna_focus”).click(function(){<br>                //关注动画只需要传递一个’attention’参数即可<br>                $(this).snabbt(‘attention’,{<br>                     rotation: [0, 0, Math.PI/2],<br>                      springConstant: 1.9,<br>                      springDeceleration: 0.9,<br>                })<br>            })</pre><br><p>&nbsp;</p><br><p>关注动画只需要传递一个’attention’参数即可</p><br><p>同时关注动画会在原点不断回弹摆动 详情看demo</p><br><p>&nbsp;</p></blockquote><br><p>&nbsp;</p><br><blockquote><br><h2 style="text-align: center;"><span style="color: #333333;"><strong>多个元素动画</strong></span></h2><br><pre class="lang:default decode:true">$(“#sna_con”).click(function(){<br>                $(“#sna_more”).find(“.sna_small”).snabbt({<br>                    //设置初始状态/初始地址为0 0 0<br>                 fromRotation: [0, 0, 0],<br>                 fromPotition:[0,0,0],<br>                 position:function(i,total){<br>                     return [i<em>(total</em>10),0,0]<br>                 },<br>                 rotation: function(i, total) {<br>                     console.log(total)//最后结果是5 因为有5个元素<br>                     console.log(i)//1,2,3,4 获取sna_small节点<br>                    return [0, 0, (i/(total - 1)) <em> (Math.PI/2)];<br>                  },<br>                   easing: ‘spring’,<br>                }).snabbt({<br>                    position:[0,0,0],<br>                    rotation: [0, 0, 0],<br>                      delay: function(i, total) {<br>                        return (total - i - 1) </em> 50;<br>                      },<br>                      easing: ‘ease’,<br>                })<br><br><br>            })</pre><br><p>&nbsp;</p><br><p>首先获取到一个class节点集合.然后设置一个节点的初始位置和状态</p><br><p class="lang:default decode:true  ">position:function(i,total){ return [i<em>(total</em>10),0,0] },</p><br><p class="lang:default decode:true  ">position:返回的是一个数组</p><br><p class="lang:default decode:true  ">[x,y,z]</p><br><p class="lang:default decode:true  ">这里只对x进行了改变</p><br><p class="lang:default decode:true  ">i可以看出执行次数或者看成循环</p><br><p class="lang:default decode:true  ">total是总元素节点 比如这个class有5个元素 那么total恒定是5</p><br><p class="lang:default decode:true  "><br></p><p class="lang:default decode:true  ">..应该差不多了.看看demo多实践下就ok了</p><br><p>&nbsp;</p><br><p>&nbsp;</p></blockquote><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p><br><blockquote><br><h2 style="text-align: center;"><span style="color: #333333;"><strong>附表</strong></span></h2><br><section id="matrix"><br><h2>Matrix API</h2><br><p>Matrix operations are performed using the Matrix class. The class has the following methods:</p><br><ul><br><li><strong>Matrix.translate(x, y, z)</strong> - Multiplies with a translation matrix</li><br><li><strong>Matrix.rotateX(radians)</strong> - Multiplies with a rotation around the x-axis</li><br><li><strong>Matrix.rotateY(radians)</strong> - Multiplies with a rotation around the y-axis</li><br><li><strong>Matrix.rotateZ(radians)</strong> - Multiplies with a rotation around the z-axis</li><br><li><strong>Matrix.scale(x, y)</strong> - Multiplies with a scaling matrix</li><br><li><strong>Matrix.skew(ax, ay)</strong> - Multiplies with a skew matrix</li><br><li><strong>Matrix.clear()</strong> - Sets the matrix to the identity matrix</li><br></ul><br><p>All operations are chainable to make writing matrix multiplications concise, e.g.:</p><br><pre><code class="javascript hljs">matrix.translate(<span class="hljs-number">100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>).rotateX(<span class="hljs-built_in">Math</span>.PI);</code></pre><br><h3 class="extra-top-margin">Freeform transforms</h3><br><p>The matrix operations can be used outside of snabbt’s animation engine. This could be useful for interactive animations.</p><br><pre><code class="javascript hljs"><span class="hljs-keyword">var</span> matrix = snabbt.createMatrix();<br>matrix.translate(<span class="hljs-number">100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>snabbt.setElementTransform(element, matrix);</code></pre><br></section><br><section id="api"><br><h3>Animation configuration</h3><br><p>The following parameters can on the configuration object:</p><br><table class="hide-mobile"><br><thead><br><tr><br><td>Parameter</td><br><td>Type</td><br><td>Default</td><br><td>Description</td><br></tr><br></thead><br><tbody><br><tr><br><td>position</td><br><td>Array(3)</td><br><td>[0, 0, 0]</td><br><td>Pixel offsets in each x-, y- and z-direction</td><br></tr><br><tr><br><td>rotation</td><br><td>Array(3)</td><br><td>[0, 0, 0]</td><br><td>Rotation in radians in x-, y- and z-direction</td><br></tr><br><tr><br><td>scale</td><br><td>Array(2)</td><br><td>[1, 1]</td><br><td>Scale in x- and y-direction</td><br></tr><br><tr><br><td>rotationPost</td><br><td>Array(3)</td><br><td>[0, 0, 0]</td><br><td>Rotation applied after <em>position</em> and <em>rotation</em></td><br></tr><br><tr><br><td>width</td><br><td>Scalar</td><br><td>Unchanged</td><br><td>Element width in pixels(<em>fromWidth</em> mandatory if used)</td><br></tr><br><tr><br><td>height</td><br><td>Scalar</td><br><td>Unchanged</td><br><td>Element height in pixels(<em>fromHeight</em> mandatory if used)</td><br></tr><br><tr><br><td>opacity</td><br><td>Scalar</td><br><td>1</td><br><td>Element opacity(0 - 1)(<em>fromOpactiy</em> mandatory if used)</td><br></tr><br><tr><br><td>duration</td><br><td>Scalar</td><br><td>500</td><br><td>Animation duration in milliseconds</td><br></tr><br><tr><br><td>delay</td><br><td>Scalar</td><br><td>0</td><br><td>Delay before the animation is started in milliseconds</td><br></tr><br><tr><br><td>loop</td><br><td>Scalar</td><br><td>0</td><br><td>Number of times to repeat the animation</td><br></tr><br><tr><br><td>complete</td><br><td>function</td><br><td>undefined</td><br><td>Function to be called when animation is completed</td><br></tr><br></tbody><br></table><br></section><br></blockquote><br><p>&nbsp;</p><br><p>&nbsp;</p>





      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-115ver" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/115ver/" class="article-date">
  	<time datetime="2015-10-21T14:57:05.755Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/115ver/">jquery:类似于焦点图的图片轮播展示</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>..昨晚上思维停灵活的..不过只把“下一页”这个功能给实现了…今天翻过来看想实现“上一页”功能直接就傻眼了…希望大神能够帮小弟补全代码！！万分感激2333</p><br><p>&nbsp;</p><br><p>dome演示地址<a href="http://www.old.com/demo/%E7%AE%80%E5%8D%95%E5%B1%95%E7%A4%BA%E6%95%88%E6%9E%9C/jquery-%E8%A7%86%E9%A2%91%E5%A2%99.html" target="_blank" rel="external">点击演示</a></p><br><p>&nbsp;</p><br><blockquote><br><h1><span style="color: #993366;"><strong>分析</strong></span></h1><br><p>首先初始化了一些变量</p><br><pre class="lang:default decode:true">//定义每个版面放几张图片<br>            this.num=4;<br>            //定义最大图片张数<br>            this.max_num=9;<br>            //定义每张图片宽度<br>            this.eve_img=205;<br>            //定义最多能显示几版面<br>            this.max_lable=3;<br>            //初始化i标签(就是小圆点导航)<br>            this.i_lable=0<br>            //定义小圆点导航数量<br>            this.i_maxlable=$(“i”).length</pre><br><p>然后点击下一页的时候 根据剩余图片数量来判断left距离多少</p><br><p>&nbsp;</p><br><p>具体的大家看代码咯</p></blockquote><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>代码</p><br><pre class="lang:default decode:true">&lt;!doctype html&gt;<br>&lt;html lang=”en”&gt;<br>&lt;head&gt;<br>    &lt;meta charset=”UTF-8”&gt;<br>    &lt;title&gt;Document&lt;/title&gt;<br>    &lt;style type=”text/css”&gt;<br>    <em>{margin:0; padding: 0;font-family: ‘微软雅黑’;}<br>    #warp{<br>        width: 960px;<br>        margin:100px auto;<br>        overflow: hidden;<br>    }<br><br><br>    .show_head h1{<br>        float: left;<br>        display: block;<br>    }<br>    .show_head i{<br>        margin-left: 10px;<br>        margin-top: 25px;<br>        display: inline-block;<br>        width: 10px;<br>        height: 10px;<br>        border-radius:10px;<br>        background-color: #2D2D29;<br>    }<br>    .show_head a{<br>        text-decoration: none;<br>        display: inline-block;<br>        margin-left: 20px;<br>        color: #fff;<br>        height: 40px;<br>        line-height: 40px;<br>        width: 80px;<br>        text-align: center;<br>        background: #2D2D29;<br><br>    }<br>    #currt{<br>        background-color: #215A6D;<br>    }<br><br>    .show_img{<br>        overflow: hidden;<br>        width: 820px;<br>        height: 200px;<br>        position: relative;<br>    }<br><br>    .show_img img{<br>        width: 200px;<br>        height: 200px;<br>        padding: 0;<br>        margin:0;<br>    }<br>    .show_img li{<br>        display:inline-block;vertical-align:top;<br>        margin: 0;<br>        padding: 0;<br>        height: 200px;<br>        width: 200px;<br><br>    }<br>    .img_ul{<br>        display:inline-block;white-space:nowrap;<br>        position: relative;<br>        left:0px;<br>    }<br>    &lt;/style&gt;<br>    &lt;script type=”text/javascript” src=”jquery-1.9.1.min.js”&gt;&lt;/script&gt;<br>    &lt;script type=”text/javascript”&gt;<br>    $(function(){<br>        function showImg(){<br>            //定义每个版面放几张图片<br>            this.num=4;<br>            //定义最大图片张数<br>            this.max_num=9;<br>            //定义每张图片宽度<br>            this.eve_img=205;<br>            //定义最多能显示几版面<br>            this.max_lable=3;<br>            //初始化i标签(就是小圆点导航)<br>            this.i_lable=0<br>            //定义小圆点导航数量<br>            this.i_maxlable=$(“i”).length<br>        }<br><br>        showImg.prototype.showNext=function(){<br>            //获取定义域<br>            than=this<br>            //设置最大图片张数<br>            var sum_max=than.max_num;<br>            //设置每个版面放几张图片<br>            var sum_num=than.num;<br>            //设置最多能显示几个版面<br>            var sum_lable=than.max_lable;<br>            //设定小圆点导航<br>            var sum_i_lable=than.i_lable;<br>            //设置小圆点导航最大数量<br>            var sum_i_maxlable=than.i_maxlable<br>            $(“.next”).click(function(){<br>                //每次减一个版面<br>                sum_lable–<br>                //每次小圆点导航+1<br>                sum_i_lable++<br>                //每次过去4张图片<br>                sum_max=sum_max-sum_num;<br><br>                //—-开始获取ul left—–<br>                var <em>left</em>=$(“.img_ul”).css(“left”)<br>                var now_left=parseInt(<em>left</em>)//获取ul目前left<br>                //—-结束获取ul left—–<br><br>                //—-更改小圆点导航开始—-<br>                //取消i标签的全部id<br>                $(“i”).siblings().attr(“id”,” “)<br>                //如果目前小圆点导航大于了最大的小圆点导航-1<br>                //别忘了eq()是从0开始计数的<br>                if (sum_i_lable&gt;(sum_i_maxlable-1)) {<br>                    sum_i_lable=0<br>                };<br>                //更改小圆点导航<br>                $(“i”).eq(sum_i_lable).attr(“id”,”currt”)<br>                console.log(sum_i_lable);<br>                //—-更改小圆点导航结束//<br><br><br>                //—-切换版面开始—-<br>                if (sum_max&gt;=sum_num) {//如果目前剩余图片大于4<br>                    //更改ul left<br>                    $(“.img_ul”).css({<br>                        “left”:”-“+than.eve_img</em>sum_num+”px”<br>                    })<br>                }else{<br><br>                    if(sum_lable&gt;0){//如果目前剩余的面板大于0<br>                        $(“.img_ul”).css({<br>                        “left”:now_left+(sum_max*than.eve_img)+”px”<br>                    })<br>                    }else{<br>                        //如果目前剩余面板小于等于0<br>                        $(“.img_ul”).css({<br>                            “left”:0<br>                        })<br>                        //重新定义版面<br>                        sum_lable=than.max_lable;<br>                        //重新定义最大图片张数<br>                        sum_max=than.max_num;<br><br>                    }<br><br>                };<br>            //—-切换版面结束—-<br>            })<br>        }<br><br><br><br><br><br>        var vshow=new showImg();<br>        vshow.showNext()<br><br><br><br>    })<br><br><br>    &lt;/script&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;div id=”warp”&gt;<br>        &lt;div class=”show”&gt;<br>            &lt;div class=”show_head”&gt;<br>                &lt;h1&gt;卡通动漫&lt;/h1&gt;<br>                &lt;i id=”currt”&gt;&lt;/i&gt;<br>                &lt;i&gt;&lt;/i&gt;<br>                &lt;i&gt;&lt;/i&gt;<br>                &lt;a class=”prev”&gt;上一页&lt;/span&gt;<br>                &lt;a class=”next”&gt;下一页&lt;/span&gt;<br>            &lt;/div&gt;<br>            &lt;div class=”show_con”&gt;<br>                &lt;div class=”show_img”&gt;<br>                    &lt;ul class=”img_ul”&gt;<br>                        &lt;li&gt;&lt;img src=”img/1.jpg” alt=””&gt;&lt;/li&gt;<br>                        &lt;li&gt;&lt;img src=”img/2015.png” alt=””&gt;&lt;/li&gt;<br>                        &lt;li&gt;&lt;img src=”img/2048.jpg” alt=””&gt;&lt;/li&gt;<br>                        &lt;li&gt;&lt;img src=”img/2015-1.jpg” alt=””&gt;&lt;/li&gt;<br>                        &lt;li&gt;&lt;img src=”img/2015.png” alt=””&gt;&lt;/li&gt;<br>                        &lt;li&gt;&lt;img src=”img/2048.jpg” alt=””&gt;&lt;/li&gt;<br>                        &lt;li&gt;&lt;img src=”img/2048.jpg” alt=””&gt;&lt;/li&gt;<br>                        &lt;li&gt;&lt;img src=”img/2015.png” alt=””&gt;&lt;/li&gt;<br>                        &lt;li&gt;&lt;img src=”img/2048.jpg” alt=””&gt;&lt;/li&gt;<br>                    &lt;/ul&gt;<br>                &lt;/div&gt;<br>            &lt;/div&gt;<br>        &lt;/div&gt;<br><br><br>    &lt;/div&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</pre><br><p>&nbsp;</p><br><p>&nbsp;</p><br><p>&nbsp;</p>





      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-116ver" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/116ver/" class="article-date">
  	<time datetime="2015-10-21T14:57:05.755Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/116ver/">Javascript中实现链式API的方法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p></p><p>转自:<a href="http://www.gbtags.com/gb/share/5176.htm" target="_blank" rel="external">http://www.gbtags.com/gb/share/5176.htm</a></p><p></p>
<div id="shareentry" class="arrow_box hidden"><a class="uploadimggrp" href="http://www.gbtags.com/gb/networks/uploadimg/82740591-dcc1-4903-bc38-6e195bb6e105.jpg" target="_blank" rel="external"><img src="http://www.gbtags.com/gb/networks/uploadimgthumb/82740591-dcc1-4903-bc38-6e195bb6e105.jpg" data-original="http://www.gbtags.com/gb/networks/uploadimgthumb/82740591-dcc1-4903-bc38-6e195bb6e105.jpg" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt=""></a><p></p><br><div class="clear"></div><br></div><br><div id="blogentry" class=""><br><div class="gbarticleads"><br><div id="gb_closead" class="gb_closead"></div><br></div><br><h2>链式操作概念</h2><br><p>在javascript开发过程中，实现链式API会帮助开发者更方便的理解代码，增加代码的可读性，下面是jQuery中的链式API的基础使用，如下：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="pln">$</span><span class="pun">(</span><span class="str">‘&lt;div&gt;&lt;/div&gt;’</span><span class="pun">)</span></li><br><li class="L1"><span class="pun">.</span><span class="pln">html</span><span class="pun">(</span><span class="str">“链式API使用演示”</span><span class="pun">)</span></li><br><li class="L2"><span class="pun">.</span><span class="pln">addClass</span><span class="pun">(</span><span class="str">“demo”</span><span class="pun">)</span></li><br><li class="L3"><span class="pun">.</span><span class="pln">appendTo</span><span class="pun">(</span><span class="str">“body”</span><span class="pun">);</span></li><br></ol><br></div><br><div class="jspVerticalBar"></div><br></div><br><p>这种方式比如下的代码书写更加简洁和易于阅读：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="pln">$</span><span class="pun">(</span><span class="str">‘&lt;div&gt;&lt;/div&gt;’</span><span class="pun">).</span><span class="pln">html</span><span class="pun">(</span><span class="str">“链式API使用演示”</span><span class="pun">);</span></li><br><li class="L1"><span class="pln">$</span><span class="pun">(</span><span class="str">‘&lt;div&gt;&lt;/div&gt;’</span><span class="pun">).</span><span class="pln">addClass</span><span class="pun">(</span><span class="str">“demo”</span><span class="pun">);</span></li><br><li class="L2"><span class="pln">$</span><span class="pun">(</span><span class="str">‘&lt;div&gt;&lt;/div&gt;’</span><span class="pun">).</span><span class="pln">appendTo</span><span class="pun">(</span><span class="str">“body”</span><span class="pun">);</span></li><br></ol><br></div><br><div class="jspVerticalBar"></div><br></div><br><blockquote><p>相关课程及其代码：<a href="http://www.gbtags.com/gb/gbtutorials/570.htm" target="_blank">什么是链式操作API？</a></p></blockquote><br><h2>如何实现链式操作</h2><br><p>设计链式API很简单，只需要保证每一个操作方法的返回都是当前对象即可，如下：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="kwd">var</span> <span class="typ">MyClass</span> <span class="pun">=</span> <span class="kwd">function</span><span class="pun">(</span><span class="pln">a</span><span class="pun">){</span></li><br><li class="L1"><span class="kwd">this</span><span class="pun">.</span><span class="pln">a </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">;</span></li><br><li class="L2"><span class="pun">}</span></li><br><li class="L3"></li><br><li class="L4"><span class="typ">MyClass</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">selfadd </span><span class="pun">=</span> <span class="kwd">function</span><span class="pun">(</span><span class="pln">b</span><span class="pun">){</span></li><br><li class="L5"><span class="kwd">this</span><span class="pun">.</span><span class="pln">a </span><span class="pun">+=</span><span class="pln"> b</span><span class="pun">;</span></li><br><li class="L6"><span class="pln"> document</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="str">“当前值：”</span> <span class="pun">+</span> <span class="kwd">this</span><span class="pun">.</span><span class="pln">a </span><span class="pun">+</span> <span class="str">“&lt;br/&gt;”</span><span class="pun">);</span></li><br><li class="L7"><span class="kwd">return</span> <span class="kwd">this</span><span class="pun">;</span></li><br><li class="L8"><span class="pun">}</span></li><br></ol><br></div><br><div class="jspVerticalBar"></div><br></div><br><p>以上代码中方法都返回当前的对象this，这样可以继续使用对象调用对应方法</p><br><blockquote><p>相关课程和代码：<a href="http://www.gbtags.com/gb/gbtutorials/571.htm" target="_blank">如何设计javascript中链式操作API</a></p></blockquote><br><h2>返回和不返回this的性能比对</h2><br><p>如果担心返回this对象和不返回this对象的性能有很大差异的话，可以运行下面这个代码：</p><br><blockquote><p><a href="http://www.gbtags.com/gb/gbtutorialpreview/572.htm" target="_blank">性能比较</a></p></blockquote><br><p>可以看到区别差异非常小，所以在js开发中，使用链式操作API带来的易用性和可读性往往大于性能损耗，不同浏览器的支持也不太一样，推荐大家尽可能使用吧~~</p><br></div>





      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-117ver" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/117ver/" class="article-date">
  	<time datetime="2015-10-21T14:57:05.755Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/117ver/">最值得收藏的Bootstrap免费字体和图标网站</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p></p><p>转自<a href="http://www.gbtags.com/gb/share/4489.htm" target="_blank" rel="external">http://www.gbtags.com/gb/share/4489.htm</a></p><p></p>
<div id="shareentry" class="arrow_box hidden"><a class="uploadimggrp" href="http://www.gbtags.com/gb/networks/uploadimg/3105fea8-da6a-49e6-94c5-e172aa93397f.jpg" target="_blank" rel="external"><img src="http://www.gbtags.com/gb/networks/uploadimgthumb/3105fea8-da6a-49e6-94c5-e172aa93397f.jpg" data-original="http://www.gbtags.com/gb/networks/uploadimgthumb/3105fea8-da6a-49e6-94c5-e172aa93397f.jpg" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt=""></a><p></p><br><div class="clear"></div><br></div><br><div id="blogentry" class=""><br><div class="gbarticleads"></div><br><p>如果你正在寻找Bootstrap图标，那今天的推荐对你而言绝对非常重要！在这篇内容中，我们把这套框架上的免费字体图标做了个整合(当然，以后还会不断的更新)。正如你所知，图标字体在一个web网页设计拥有很多优势：它们使用方便，不仅仅是图像，更是一个载体。大小随意缩放，还可以适应各种尺寸的屏幕（包含移动设备，平板电脑等）。</p><br><p>这套集合图标使用起来非常的方便：你只需要点击下载包，将文件添加到你的目录中。在介绍中我们也会对每一个图标有一个简短的描述，让你了解如何使用它们。如果你有兴趣收藏，也可以自己创建一个文档，将它们全部添加进去。我们经常会推荐一些图标网站给大家，除此之外，还有Bootstrap模板和字体，比如<a href="http://azmind.com/shop/" target="_blank">Bootstrap templates</a>, 像<a href="http://azmind.com/2014/12/12/jalia-premium-bootstrap-business-template/" target="_blank">Jalia</a> 和<a href="http://www.gbtags.com/gb/tag/1091.htm" target="_blank">Gbtags</a>，无论是模板还是素材，我们都将最好的呈现给你。所以，还等什么呢？开始吧。</p><br><h2>1. Glyphicons Halflings</h2><br><p>首先这包含了200多款字体图标是来自于<a href="http://glyphicons.com/" target="_blank">Glyphicon Halflings</a>。非常出色的一套bootstrap模板图标，要特别感谢Glyphicons里的每一个人。这里除了图标，还有一些大图供你使用和下载。帮助你快速搭建一个网站。</p><br><p><a class="uploadimggrp" href="http://www.gbtags.com/gb/networks/uploadimg/cd323994-5499-4de3-9b6d-2abc7e63d28a.jpg" target="_blank"><img src="http://www.gbtags.com/gb/networks/uploadimgthumb/cd323994-5499-4de3-9b6d-2abc7e63d28a.jpg" data-original="http://www.gbtags.com/gb/networks/uploadimgthumb/cd323994-5499-4de3-9b6d-2abc7e63d28a.jpg" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt=""></a></p><br><h3>如何使用：</h3><br><p>找到Glyphicons里你需要的内容，然后再html里添加一个图标，内容如下：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="tag">&lt;span</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">“glyphicon glyphicon-search”</span> <span class="atn">aria-hidden</span><span class="pun">=</span><span class="atv">“true”</span><span class="tag">&gt;&lt;/span&gt;</span></li><br></ol><br></div><br></div><br><h2>2. Font Awesome</h2><br><p>479款矢量字体图标全部免费，这是什么概念，就是即使你现在不用也要马上收藏的节奏，知道吗！或许你之前听说过这套图标集，因为它在很多网站都出现过。它们给我们提供的是一种方便，虽然曾经有过类似的介绍，但我今天还是要说，在很多图标字体中，我真的觉得它是最棒的-<a href="http://fortawesome.github.io/Font-Awesome/" target="_blank">Font Awesome</a></p><br><p><a class="uploadimggrp" href="http://www.gbtags.com/gb/networks/uploadimg/4a3e88ba-6e0a-4680-9a58-622f739813b0.jpg" target="_blank"><img src="http://www.gbtags.com/gb/networks/uploadimgthumb/4a3e88ba-6e0a-4680-9a58-622f739813b0.jpg" data-original="http://www.gbtags.com/gb/networks/uploadimgthumb/4a3e88ba-6e0a-4680-9a58-622f739813b0.jpg" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt=""></a></p><br><h3>如何使用：</h3><br><p>在开始页面，字体使用有一些非常好的方法。最简单的是倒入CDN的一行代码，而且无需下载任何东西，只要贴在HTML中第一节就可以了：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="tag">&lt;link</span> <span class="atn">href</span><span class="pun">=</span><span class="atv">“//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css”</span> <span class="atn">rel</span><span class="pun">=</span><span class="atv">“stylesheet”</span><span class="tag">&gt;</span></li><br></ol><br></div><br></div><br><p>在这里介绍另一种方法（i like你懂得），在CSS中引用默认字体Font Awesome，下载并复制‘font-awesome’目录到你的项目中，添加链接 “font-awesome.min.css”文件到HTML的第一节上。</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="tag">&lt;link</span> <span class="atn">rel</span><span class="pun">=</span><span class="atv">“stylesheet”</span> <span class="atn">href</span><span class="pun">=</span><span class="atv">“path/to/font-awesome/css/font-awesome.min.css”</span><span class="tag">&gt;</span></li><br></ol><br></div><br><div class="jspVerticalBar"></div><br></div><br><p>当然了，还有很多其他的方法，再介绍一个简单的例子吧：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="tag">&lt;i</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">“fa fa-camera-retro”</span><span class="tag">&gt;&lt;/i&gt;</span></li><br></ol><br></div><br><div class="jspVerticalBar"></div><br></div><br><p>这些方法都可以将你喜欢的字体变大变小，更换颜色阴影等，只要你喜欢，无所不能。</p><br><h2>3. Elegant Icon Font</h2><br><p>由360款优雅的矢量图标字体组成，完全免费使用-<a href="http://www.elegantthemes.com/blog/resources/elegant-icon-font" target="_blank">elegantthemes</a>。这些图标已经全部进行了优化16*16像素（32px，64px等）的所有倍数。使之细节更加精准和清晰，在任何显示器上的都能呈现最完美的一面，当然包括Retina屏。</p><br><p><a class="uploadimggrp" href="http://www.gbtags.com/gb/networks/uploadimg/cc037907-449a-4a16-8df7-af9b8d4414a6.jpg" target="_blank"><img src="http://www.gbtags.com/gb/networks/uploadimgthumb/cc037907-449a-4a16-8df7-af9b8d4414a6.jpg" data-original="http://www.gbtags.com/gb/networks/uploadimgthumb/cc037907-449a-4a16-8df7-af9b8d4414a6.jpg" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt=""></a></p><br><h3>如何使用：</h3><br><p>不要认为它很难：</p><br><ol><br><li>下载包并解压</li><br><li>在‘elegant_font’文件夹中你会发现“HTML CSS”子文件夹，把它复制到你的项目中（注意，这里可以重命名哦）</li><br><li>将连接添加到‘style.css’文件中HTML的第一节。</li><br></ol><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="tag">&lt;link</span> <span class="atn">rel</span><span class="pun">=</span><span class="atv">“stylesheet”</span> <span class="atn">href</span><span class="pun">=</span><span class="atv">“path/to/elegant-font/style.css”</span><span class="tag">&gt;</span></li><br></ol><br></div><br></div><br><p>你可以在你HTML里添加图标，并且使用CSS来更改它们的样式：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="tag">&lt;span</span> <span class="atn">aria-hidden</span><span class="pun">=</span><span class="atv">“true”</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">“icon_pencil”</span><span class="tag">&gt;&lt;/span&gt;</span></li><br></ol><br></div><br></div><br><p>例如：</p><br><p>下面是我如何在<a href="http://azmind.com/2015/01/02/premium-template-trilli-bi-bootstrap-fullscreen-landing-page/" target="_blank">Trilli Bi</a>模板中使用图标：</p><br><p><a class="uploadimggrp" href="http://www.gbtags.com/gb/networks/uploadimg/236780f0-8209-45f7-999b-8584a8262501.jpg" target="_blank"><img src="http://www.gbtags.com/gb/networks/uploadimgthumb/236780f0-8209-45f7-999b-8584a8262501.jpg" data-original="http://www.gbtags.com/gb/networks/uploadimgthumb/236780f0-8209-45f7-999b-8584a8262501.jpg" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt=""></a></p><br><h2>HTML：</h2><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="tag">&lt;div</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">“features-box-icon”</span><span class="tag">&gt;</span></li><br><li class="L1"><span class="tag">&lt;span</span> <span class="atn">aria-hidden</span><span class="pun">=</span><span class="atv">“true”</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">“icon_cogs”</span><span class="tag">&gt;&lt;/span&gt;</span></li><br><li class="L2"><span class="tag">&lt;/div&gt;</span></li><br></ol><br></div><br></div><br><h2>CSS：</h2><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="pun">.</span><span class="pln">features</span><span class="pun">-</span><span class="pln">box</span><span class="pun">-</span><span class="pln">icon </span><span class="pun">{</span></li><br><li class="L1"><span class="pln"> width</span><span class="pun">:</span> <span class="lit">80px</span><span class="pun">;</span></li><br><li class="L2"><span class="pln"> height</span><span class="pun">:</span> <span class="lit">80px</span><span class="pun">;</span></li><br><li class="L3"><span class="pln"> margin</span><span class="pun">:</span> <span class="lit">0</span> <span class="kwd">auto</span><span class="pun">;</span></li><br><li class="L4"><span class="pln"> padding</span><span class="pun">-</span><span class="pln">top</span><span class="pun">:</span> <span class="lit">10px</span><span class="pun">;</span></li><br><li class="L5"><span class="pln"> background</span><span class="pun">:</span> <span class="com">#e8643e;</span></li><br><li class="L6"><span class="pun">-</span><span class="pln">moz</span><span class="pun">-</span><span class="pln">border</span><span class="pun">-</span><span class="pln">radius</span><span class="pun">:</span> <span class="lit">6px</span><span class="pun">;</span></li><br><li class="L7"><span class="pun">-</span><span class="pln">webkit</span><span class="pun">-</span><span class="pln">border</span><span class="pun">-</span><span class="pln">radius</span><span class="pun">:</span> <span class="lit">6px</span><span class="pun">;</span></li><br><li class="L8"><span class="pln"> border</span><span class="pun">-</span><span class="pln">radius</span><span class="pun">:</span> <span class="lit">6px</span><span class="pun">;</span></li><br><li class="L9"><span class="pln"> font</span><span class="pun">-</span><span class="pln">size</span><span class="pun">:</span> <span class="lit">50px</span><span class="pun">;</span></li><br><li class="L0"><span class="pln"> color</span><span class="pun">:</span> <span class="com">#fff;</span></li><br><li class="L1"><span class="pln"> line</span><span class="pun">-</span><span class="pln">height</span><span class="pun">:</span> <span class="lit">50px</span><span class="pun">;</span></li><br><li class="L2"><span class="pln"> text</span><span class="pun">-</span><span class="pln">align</span><span class="pun">:</span><span class="pln"> center</span><span class="pun">;</span></li><br><li class="L3"><span class="pun">}</span></li><br><li class="L4"></li><br><li class="L5"><span class="pun">.</span><span class="pln">features</span><span class="pun">-</span><span class="pln">box</span><span class="pun">-</span><span class="pln">icon span </span><span class="pun">{</span></li><br><li class="L6"><span class="pln"> vertical</span><span class="pun">-</span><span class="pln">align</span><span class="pun">:</span><span class="pln"> middle</span><span class="pun">;</span></li><br><li class="L7"><span class="pun">}</span></li><br></ol><br></div><br></div><br><h2>4. Gbtags</h2><br><p><a href="http://www.gbtags.com/gb/dashboard.htm" target="_blank">Gbtags</a>是一个前端教学非常全面的网站，除了超规模超人气的<a href="http://www.gbtags.com/gb/tag/1091.htm" target="_blank">bootstrap模板</a>和<a href="http://www.gbtags.com/gb/tag/1009.htm" target="_blank">图标</a>外，还教你如何制作网页。它拥有一个非常强大的前端<a href="http://www.gbtags.com/gb/gblibrary.htm" target="_blank">课程库</a>，我一直在思考，只靠一名技术大拿就将网站练就成这般高人气水平实属不易。网站中的模板和图标字体共有几百套并全部免费下载，除了是非常好的资源型网站外，更是学习和交流的平台，推荐指数6颗星。</p><br><p><a class="uploadimggrp" href="http://www.gbtags.com/gb/networks/uploadimg/8105dfa8-f396-4af4-9d7e-0ad382bf4ad7.jpg" target="_blank"><img src="http://www.gbtags.com/gb/networks/uploadimgthumb/8105dfa8-f396-4af4-9d7e-0ad382bf4ad7.jpg" data-original="http://www.gbtags.com/gb/networks/uploadimgthumb/8105dfa8-f396-4af4-9d7e-0ad382bf4ad7.jpg" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt=""></a></p><br><h2>5. Typicons</h2><br><p>Typicons带来了336款免费的矢量图标，多用途，像素完美和方便嵌入是它绝对的优势<a href="http://typicons.com/" target="_blank">-typicons</a>。</p><br><p><a class="uploadimggrp" href="http://www.gbtags.com/gb/networks/uploadimg/6ba4d9aa-86b9-4b9e-a83b-f972752c5325.jpg" target="_blank"><img src="http://www.gbtags.com/gb/networks/uploadimgthumb/6ba4d9aa-86b9-4b9e-a83b-f972752c5325.jpg" data-original="http://www.gbtags.com/gb/networks/uploadimgthumb/6ba4d9aa-86b9-4b9e-a83b-f972752c5325.jpg" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt=""></a></p><br><h3>如何使用：</h3><br><p>首先在你bootstrap的项目中Typicons是很容易使用的。在Typicons的主页，你可以很清楚的了解所有使用图标的方式，当然，你也可以学习自己如何创建并自定义设置图标。首先介绍一个简单的方式：</p><br><ol><br><li>点击<a href="https://github.com/stephenhutchings/typicons.font/tree/master/src/font" target="_blank">GitHub page here</a>下载页面上的字体文件和缩小的CSS</li><br><li>复制它们到你项目的文件夹</li><br><li>在HTML的第一节加入 “typicons.min.css”</li><br></ol><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="tag">&lt;link</span> <span class="atn">rel</span><span class="pun">=</span><span class="atv">“stylesheet”</span> <span class="atn">href</span><span class="pun">=</span><span class="atv">“path/to/typicons.min.css”</span><span class="tag">&gt;</span></li><br></ol><br></div><br></div><br><p>现在在你HTML文件夹中添加图标，可以使用CSS更改它们的样式。</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="tag">&lt;span</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">“typcn typcn-arrow-left”</span><span class="tag">&gt;&lt;span&gt;</span></li><br></ol><br></div><br></div><br><p>你可以在typicons上找到所有名字相对应的类目。</p><br><h2>6. Meteocons</h2><br><p>如果你现在正需要一些关于天气的图标，<a href="http://www.alessioatzeni.com/meteocons/" target="_blank">Meteocons</a>应该是不错的一套。它包含了40多种图标，全部免费使用，可以用在商业和个人的项目中。包含不同格式文件：PSD、CSH、EPS、SVG和桌面、web字体，只要你喜欢，它们可以自定义，使用起来更加方便。</p><br><p>要想使用这些图标是非常简单的，更多方法可以参考<a href="http://www.alessioatzeni.com/meteocons/" target="_blank">Meteocons</a>主页。</p><br><p><a class="uploadimggrp" href="http://www.gbtags.com/gb/networks/uploadimg/d7cecd11-c842-4d15-8fae-35aa3487e9c8.jpg" target="_blank"><img src="http://www.gbtags.com/gb/networks/uploadimgthumb/d7cecd11-c842-4d15-8fae-35aa3487e9c8.jpg" data-original="http://www.gbtags.com/gb/networks/uploadimgthumb/d7cecd11-c842-4d15-8fae-35aa3487e9c8.jpg" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt=""></a></p><br><h2>7. Open Iconic</h2><br><p><a href="https://useiconic.com/open" target="_blank">Open Iconie</a>是一款免费的开源图标，包含SVG、网页字体和图标集223种。作为创造者，<a href="https://useiconic.com/open" target="_blank">Open Iconie</a>已然是超清了，在设计时，它们被下降了8个px，所以它们非常的小，但同时在网页浏览速度上，它们又是加载速度最快的。</p><br><p><a class="uploadimggrp" href="http://www.gbtags.com/gb/networks/uploadimg/909d8077-2ff3-49be-ae98-14d3a42f93d6.jpg" target="_blank"><img src="http://www.gbtags.com/gb/networks/uploadimgthumb/909d8077-2ff3-49be-ae98-14d3a42f93d6.jpg" data-original="http://www.gbtags.com/gb/networks/uploadimgthumb/909d8077-2ff3-49be-ae98-14d3a42f93d6.jpg" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt=""></a></p><br><h3>如何使用：</h3><br><p>非常简单，如下三步：</p><br><ol><br><li>从网页中下载软件包</li><br><li>将该文件复制到你的项目中</li><br><li>在HTML的第一节插入“open-iconic-bootstrap.css”</li><br></ol><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="tag">&lt;link</span> <span class="atn">rel</span><span class="pun">=</span><span class="atv">“stylesheet”</span> <span class="atn">href</span><span class="pun">=</span><span class="atv">“/open-iconic/font/css/open-iconic-bootstrap.css”</span><span class="tag">&gt;</span></li><br></ol><br></div><br></div><br><p>添加素材到你的HTML文件，可以使用CSS来更改它们的样式：</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="tag">&lt;span</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">“oi oi-icon-name”</span> <span class="atn">title</span><span class="pun">=</span><span class="atv">“icon name”</span> <span class="atn">aria-hidden</span><span class="pun">=</span><span class="atv">“true”</span><span class="tag">&gt;&lt;/span&gt;</span></li><br></ol><br></div><br></div><br><p>你可以在这里找到所有图标相对应的类别名称。</p><br><h2>8. Elusive Icons</h2><br><p><a href="http://press.codes/downloads/elusive-icons-webfont/" target="_blank">Elusive Icons</a>包含了299种免费的图标，开源可作为网页字体和SVG矢量图标。</p><br><p><a class="uploadimggrp" href="http://www.gbtags.com/gb/networks/uploadimg/c58d6f05-85fc-4654-9eef-a3a72b277edb.jpg" target="_blank"><img src="http://www.gbtags.com/gb/networks/uploadimgthumb/c58d6f05-85fc-4654-9eef-a3a72b277edb.jpg" data-original="http://www.gbtags.com/gb/networks/uploadimgthumb/c58d6f05-85fc-4654-9eef-a3a72b277edb.jpg" onerror="this.onerror=null;this.src='http://www.old.com/wp-content/themes/BYMT/images/images_error.jpg'" alt=""></a></p><br><h3>如何使用：</h3><br><p>看起来不容易，但实际上非常简单，可以使用CSS方法或者LESS。</p><br><p>CSS方法如下：</p><br><ol><br><li>下载并复制“fonts”目录到你的项目</li><br><li>复制 “elusive-webfont.css”文件到你的项目</li><br><li>打开“elusive-webfont.css” 文件上面的编辑字体网址，确定它们的指向是正确的。</li><br><li>在HTML第一节插入 “elusive-webfont.css”文件</li><br></ol><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="tag">&lt;link</span> <span class="atn">rel</span><span class="pun">=</span><span class="atv">“stylesheet”</span> <span class="atn">href</span><span class="pun">=</span><span class="atv">“path/to/elusive-webfont.css”</span><span class="tag">&gt;</span></li><br></ol><br></div><br></div><br><p>添加图标到HTML代码中，并且使用CSS来更改它们的样式。</p><br><div class="jspContainer"><br><div class="jspPane"><br><ol class="linenums"><br><li class="L0"><span class="tag">&lt;i</span> <span class="atn">class</span><span class="pun">=</span><span class="atv">“el-icon-user”</span><span class="tag">&gt;&lt;/i&gt;</span></li><br></ol><br></div><br></div><br><h3>最后</h3><br><p>在这里你能找到最好的免费字体图标，希望它们能带给你更多的帮助，并有助于你的开发和设计。另外，我们还会定时更新更多内容，找到更多更好的图标集，希望你们继续关注我们。</p><br></div>





      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-118ver" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/118ver/" class="article-date">
  	<time datetime="2015-10-21T14:57:05.755Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/118ver/">HTML5游戏开发引擎比较： LimeJS vs. CreateJS</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p></p><p>转自:<a href="http://www.gbtags.com/gb/share/4859.htm" target="_blank" rel="external">http://www.gbtags.com/gb/share/4859.htm</a></p><p></p>
<p></p><p><a href="http://www.limejs.com/" target="_blank" rel="external">Limejs</a> :</p><p></p>
<p><ul></ul></p>
<p><li>需要安装python来编译和运行代码</li></p>
<p><li>需要使用其他Javascript来预加载游戏相关资源</li></p>
<p><li>编译后的代码不是开发人员易于阅读的，因此无法让第三方使用。编译使用python完成</li></p>
<p><li>不同浏览器的音频问题不一样</li></p>
<p><li>除了<a href="http://limejs.digitalfruit.ee/docs/" target="_blank" rel="external">Developers API</a>没有别的开发资源</li><br></p>
<p></p><p><a href="http://www.createjs.com/" target="_blank" rel="external">CreateJS</a></p><p></p>
<p><ul></ul></p>
<p><li>使用直接使用javascript来开发和运行</li></p>
<p><li>拥有自己的preloadJS，TweenJS，EaselJS和SoundJS可以自己渲染加载和音频</li></p>
<p><li>不需要编译安全差点</li></p>
<p><li>可以使用soundJS来加载音频</li></p>
<p><li>每一个类库Tween,Easel,Sound and Preload自己拥有相关API</li><br></p>
<blockquote><p>来源：<a href="http://stackoverflow.com/questions/14112562/limejs-vs-createjs-for-game-development" target="_blank">stackoverflow</a></p></blockquote>





      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-119ver" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/119ver/" class="article-date">
  	<time datetime="2015-10-21T14:57:05.755Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/119ver/">博主推荐:学写jquery缓动函数</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p></p><p>转自<a href="http://www.gbtags.com/gb/share/4743.htm" target="_blank" rel="external">http://www.gbtags.com/gb/share/4743.htm</a></p><p></p>
<p></p><p>问题引入：实现如下效果</p><p></p>
<p></p><p><iframe width="300" height="150" src="http://www.gbtags.com/gb/debugwidget/f2ddfd95-3813-440d-bf58-8e10f0df7c80.htm"></iframe></p><p></p>
<p></p><p>&nbsp;</p><p></p>
<p></p><p>两个方块的追逐效果，使用css3，实现起来没什么难度：</p><p></p>
<p><div class="jspContainer"></div></p>
<p><div class="jspPane"></div></p>
<p><ol class="linenums"></ol></p>
<p><li class="L0"><span class="tag">&lt;div</span> <span class="atn">id</span><span class="pun">=</span><span class="atv">“container”</span><span class="tag">&gt;</span></li></p>
<p><li class="L1"><span class="tag">&lt;div</span> <span class="atn">id</span><span class="pun">=</span><span class="atv">“first”</span><span class="tag">&gt;&lt;/div&gt;</span></li></p>
<p><li class="L2"><span class="tag">&lt;div</span> <span class="atn">id</span><span class="pun">=</span><span class="atv">“second”</span><span class="tag">&gt;&lt;/div&gt;</span></li></p>
<p><li class="L3"><span class="tag">&lt;/div&gt;</span></li><br><br></p>
<p><div class="jspVerticalBar"></div><br></p>
<p></p><p>&nbsp;</p><p></p>
<p><div class="jspContainer"></div></p>
<p><div class="jspPane"></div></p>
<p><ol class="linenums"></ol></p>
<p><li class="L0"><span class="com">#container{</span></li></p>
<p><li class="L1"><span class="pln"> position</span><span class="pun">:</span><span class="pln"> relative</span><span class="pun">;</span></li></p>
<p><li class="L2"><span class="pln"> width</span><span class="pun">:</span> <span class="lit">320px</span><span class="pun">;</span></li></p>
<p><li class="L3"><span class="pln"> height</span><span class="pun">:</span> <span class="lit">320px</span><span class="pun">;</span></li></p>
<p><li class="L4"><span class="pln"> border</span><span class="pun">:</span><span class="lit">1px</span><span class="pln"> solid </span><span class="com">#ccc;</span></li></p>
<p><li class="L5"><span class="pun">}</span></li></p>
<p><li class="L6"></li></p>
<p><li class="L7"><span class="pun">@-</span><span class="pln">webkit</span><span class="pun">-</span><span class="pln">keyframes run</span><span class="pun">{</span></li></p>
<p><li class="L8"><span class="lit">0</span><span class="pun">%</span> <span class="pun">{</span></li></p>
<p><li class="L9"><span class="pln"> left</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L0"><span class="pln"> top</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L1"><span class="pun">}</span></li></p>
<p><li class="L2"><span class="lit">25</span><span class="pun">%</span> <span class="pun">{</span></li></p>
<p><li class="L3"><span class="pln"> left</span><span class="pun">:</span><span class="lit">220px</span><span class="pun">;</span></li></p>
<p><li class="L4"><span class="pln"> top</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L5"><span class="pun">}</span></li></p>
<p><li class="L6"><span class="lit">50</span><span class="pun">%</span> <span class="pun">{</span></li></p>
<p><li class="L7"><span class="pln"> left</span><span class="pun">:</span><span class="lit">220px</span><span class="pun">;</span></li></p>
<p><li class="L8"><span class="pln"> top</span><span class="pun">:</span><span class="lit">220px</span><span class="pun">;</span></li></p>
<p><li class="L9"><span class="pun">}</span></li></p>
<p><li class="L0"><span class="lit">75</span><span class="pun">%</span> <span class="pun">{</span></li></p>
<p><li class="L1"><span class="pln"> left</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L2"><span class="pln"> top</span><span class="pun">:</span><span class="lit">220px</span><span class="pun">;</span></li></p>
<p><li class="L3"><span class="pun">}</span></li></p>
<p><li class="L4"><span class="lit">100</span><span class="pun">%</span> <span class="pun">{</span></li></p>
<p><li class="L5"><span class="pln"> left</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L6"><span class="pln"> top</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L7"><span class="pun">}</span></li></p>
<p><li class="L8"><span class="pun">}</span></li></p>
<p><li class="L9"><span class="lit">@keyframes</span><span class="pln"> run</span><span class="pun">{</span></li></p>
<p><li class="L0"><span class="lit">0</span><span class="pun">%</span> <span class="pun">{</span></li></p>
<p><li class="L1"><span class="pln"> left</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L2"><span class="pln"> top</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L3"><span class="pun">}</span></li></p>
<p><li class="L4"><span class="lit">25</span><span class="pun">%</span> <span class="pun">{</span></li></p>
<p><li class="L5"><span class="pln"> left</span><span class="pun">:</span><span class="lit">220px</span><span class="pun">;</span></li></p>
<p><li class="L6"><span class="pln"> top</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L7"><span class="pun">}</span></li></p>
<p><li class="L8"><span class="lit">50</span><span class="pun">%</span> <span class="pun">{</span></li></p>
<p><li class="L9"><span class="pln"> left</span><span class="pun">:</span><span class="lit">220px</span><span class="pun">;</span></li></p>
<p><li class="L0"><span class="pln"> top</span><span class="pun">:</span><span class="lit">220px</span><span class="pun">;</span></li></p>
<p><li class="L1"><span class="pun">}</span></li></p>
<p><li class="L2"><span class="lit">75</span><span class="pun">%</span> <span class="pun">{</span></li></p>
<p><li class="L3"><span class="pln"> left</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L4"><span class="pln"> top</span><span class="pun">:</span><span class="lit">220px</span><span class="pun">;</span></li></p>
<p><li class="L5"><span class="pun">}</span></li></p>
<p><li class="L6"><span class="lit">100</span><span class="pun">%</span> <span class="pun">{</span></li></p>
<p><li class="L7"><span class="pln"> left</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L8"><span class="pln"> top</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L9"><span class="pun">}</span></li></p>
<p><li class="L0"><span class="pun">}</span></li></p>
<p><li class="L1"></li></p>
<p><li class="L2"><span class="com">#first{</span></li></p>
<p><li class="L3"><span class="pln"> width</span><span class="pun">:</span> <span class="lit">100px</span><span class="pun">;</span></li></p>
<p><li class="L4"><span class="pln"> height</span><span class="pun">:</span> <span class="lit">100px</span><span class="pun">;</span></li></p>
<p><li class="L5"><span class="pln"> background</span><span class="pun">:</span><span class="pln"> orange</span><span class="pun">;</span></li></p>
<p><li class="L6"><span class="pln"> position</span><span class="pun">:</span><span class="pln"> absolute</span><span class="pun">;</span></li></p>
<p><li class="L7"><span class="pun">-</span><span class="pln">webkit</span><span class="pun">-</span><span class="pln">animation</span><span class="pun">:</span><span class="pln"> run </span><span class="lit">1.6s</span> <span class="lit">0.8s</span><span class="pln"> infinite</span><span class="pun">;</span></li></p>
<p><li class="L8"><span class="pln"> animation</span><span class="pun">:</span><span class="pln"> run </span><span class="lit">1.6s</span> <span class="lit">0.8s</span><span class="pln"> infinite</span><span class="pun">;</span></li></p>
<p><li class="L9"><span class="pun">}</span></li></p>
<p><li class="L0"></li></p>
<p><li class="L1"><span class="com">#second{</span></li></p>
<p><li class="L2"><span class="pln"> width</span><span class="pun">:</span> <span class="lit">100px</span><span class="pun">;</span></li></p>
<p><li class="L3"><span class="pln"> height</span><span class="pun">:</span> <span class="lit">100px</span><span class="pun">;</span></li></p>
<p><li class="L4"><span class="pln"> background</span><span class="pun">:</span><span class="pln"> red</span><span class="pun">;</span></li></p>
<p><li class="L5"><span class="pln"> position</span><span class="pun">:</span><span class="pln"> absolute</span><span class="pun">;</span></li></p>
<p><li class="L6"><span class="pun">-</span><span class="pln">webkit</span><span class="pun">-</span><span class="pln">animation</span><span class="pun">:</span><span class="pln"> run </span><span class="lit">1.6s</span><span class="pln"> infinite</span><span class="pun">;</span></li></p>
<p><li class="L7"><span class="pln"> animation</span><span class="pun">:</span><span class="pln"> run </span><span class="lit">1.6s</span><span class="pln"> infinite</span><span class="pun">;</span></li></p>
<p><li class="L8"><span class="pun">}</span></li><br><br></p>
<p><div class="jspVerticalBar"></div><br></p>
<p></p><p>&nbsp;</p><p></p>
<p></p><p>用到了css3的animate属性，不是很复杂。不过出于兼容性的考虑，我们决定使用jquery的animate方法来重新实现。</p><p></p>
<p></p><h2>简单粗暴地多次使用animate</h2><p></p>
<p></p><p>可以看到，每个方块的运动都可以分解成四步，每一步都是向一个方向运动。于是如果要用$.animate来实现，可以在一个循环里，依次调用四遍animate来实现：</p><p></p>
<p><div class="jspContainer"></div></p>
<p><div class="jspPane"></div></p>
<p><ol class="linenums"></ol></p>
<p><li class="L0"><span class="com">#container{</span></li></p>
<p><li class="L1"><span class="pln"> position</span><span class="pun">:</span><span class="pln"> relative</span><span class="pun">;</span></li></p>
<p><li class="L2"><span class="pln"> width</span><span class="pun">:</span> <span class="lit">320px</span><span class="pun">;</span></li></p>
<p><li class="L3"><span class="pln"> height</span><span class="pun">:</span> <span class="lit">320px</span><span class="pun">;</span></li></p>
<p><li class="L4"><span class="pln"> border</span><span class="pun">:</span><span class="lit">1px</span><span class="pln"> solid </span><span class="com">#ccc;</span></li></p>
<p><li class="L5"><span class="pun">}</span></li></p>
<p><li class="L6"></li></p>
<p><li class="L7"><span class="com">#first{</span></li></p>
<p><li class="L8"><span class="pln"> width</span><span class="pun">:</span> <span class="lit">100px</span><span class="pun">;</span></li></p>
<p><li class="L9"><span class="pln"> height</span><span class="pun">:</span> <span class="lit">100px</span><span class="pun">;</span></li></p>
<p><li class="L0"><span class="pln"> background</span><span class="pun">:</span><span class="pln"> orange</span><span class="pun">;</span></li></p>
<p><li class="L1"><span class="pln"> position</span><span class="pun">:</span><span class="pln"> absolute</span><span class="pun">;</span></li></p>
<p><li class="L2"><span class="pln"> left</span><span class="pun">:</span> <span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L3"><span class="pln"> top</span><span class="pun">:</span> <span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L4"><span class="pun">}</span></li></p>
<p><li class="L5"></li></p>
<p><li class="L6"><span class="com">#second{</span></li></p>
<p><li class="L7"><span class="pln"> width</span><span class="pun">:</span> <span class="lit">100px</span><span class="pun">;</span></li></p>
<p><li class="L8"><span class="pln"> height</span><span class="pun">:</span> <span class="lit">100px</span><span class="pun">;</span></li></p>
<p><li class="L9"><span class="pln"> background</span><span class="pun">:</span><span class="pln"> red</span><span class="pun">;</span></li></p>
<p><li class="L0"><span class="pln"> position</span><span class="pun">:</span><span class="pln"> absolute</span><span class="pun">;</span></li></p>
<p><li class="L1"><span class="pln"> right</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L2"><span class="pln"> bottom</span><span class="pun">:</span><span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L3"><span class="pun">}</span></li><br><br></p>
<p><div class="jspVerticalBar"></div><br></p>
<p><div class="jspContainer"></div></p>
<p><div class="jspPane"></div></p>
<p><ol class="linenums"></ol></p>
<p><li class="L0"><span class="kwd">var</span><span class="pln"> $first</span><span class="pun">=</span><span class="pln">$</span><span class="pun">(</span><span class="str">‘#first’</span><span class="pun">);</span></li></p>
<p><li class="L1"><span class="kwd">var</span><span class="pln"> $second</span><span class="pun">=</span><span class="pln">$</span><span class="pun">(</span><span class="str">‘#second’</span><span class="pun">);</span></li></p>
<p><li class="L2"></li></p>
<p><li class="L3"><span class="pun">(</span><span class="kwd">function</span><span class="pln"> firstMove</span><span class="pun">(){</span></li></p>
<p><li class="L4"><span class="pln"> $first</span><span class="pun">.</span><span class="pln">animate</span><span class="pun">({</span></li></p>
<p><li class="L5"><span class="str">“left”</span><span class="pun">:</span><span class="lit">220</span><span class="pun">,</span></li></p>
<p><li class="L6"><span class="str">“top”</span><span class="pun">:</span> <span class="lit">0</span><span class="pun">,</span></li></p>
<p><li class="L7"><span class="pun">},</span><span class="lit">400</span><span class="pun">,</span><span class="str">“linear”</span><span class="pun">,</span><span class="kwd">function</span><span class="pun">(){</span></li></p>
<p><li class="L8"><span class="pln"> $first</span><span class="pun">.</span><span class="pln">animate</span><span class="pun">({</span></li></p>
<p><li class="L9"><span class="str">“left”</span><span class="pun">:</span><span class="lit">220</span><span class="pun">,</span></li></p>
<p><li class="L0"><span class="str">“top”</span><span class="pun">:</span><span class="lit">220</span></li></p>
<p><li class="L1"><span class="pun">},</span><span class="lit">400</span><span class="pun">,</span><span class="str">“linear”</span><span class="pun">,</span><span class="kwd">function</span><span class="pun">(){</span></li></p>
<p><li class="L2"><span class="pln"> $first</span><span class="pun">.</span><span class="pln">animate</span><span class="pun">({</span></li></p>
<p><li class="L3"><span class="str">“left”</span><span class="pun">:</span><span class="lit">0</span><span class="pun">,</span></li></p>
<p><li class="L4"><span class="str">“top”</span><span class="pun">:</span><span class="lit">220</span></li></p>
<p><li class="L5"><span class="pun">},</span><span class="lit">400</span><span class="pun">,</span><span class="str">“linear”</span><span class="pun">,</span><span class="kwd">function</span><span class="pun">(){</span></li></p>
<p><li class="L6"><span class="pln"> $first</span><span class="pun">.</span><span class="pln">animate</span><span class="pun">({</span></li></p>
<p><li class="L7"><span class="str">“left”</span><span class="pun">:</span><span class="lit">0</span><span class="pun">,</span></li></p>
<p><li class="L8"><span class="str">“top”</span><span class="pun">:</span><span class="lit">0</span></li></p>
<p><li class="L9"><span class="pun">},</span><span class="lit">400</span><span class="pun">,</span><span class="str">“linear”</span><span class="pun">,</span><span class="kwd">function</span><span class="pun">(){</span></li></p>
<p><li class="L0"><span class="pln"> firstMove</span><span class="pun">();</span></li></p>
<p><li class="L1"><span class="pun">});</span></li></p>
<p><li class="L2"><span class="pun">});</span></li></p>
<p><li class="L3"><span class="pun">});</span></li></p>
<p><li class="L4"><span class="pun">});</span></li></p>
<p><li class="L5"><span class="pun">})();</span></li></p>
<p><li class="L6"></li></p>
<p><li class="L7"><span class="pun">(</span><span class="kwd">function</span><span class="pln"> secondMove</span><span class="pun">(){</span></li></p>
<p><li class="L8"><span class="pln"> $second</span><span class="pun">.</span><span class="pln">animate</span><span class="pun">({</span></li></p>
<p><li class="L9"><span class="str">“right”</span><span class="pun">:</span><span class="lit">220</span><span class="pun">,</span></li></p>
<p><li class="L0"><span class="str">“bottom”</span><span class="pun">:</span><span class="lit">0</span></li></p>
<p><li class="L1"><span class="pun">},</span><span class="lit">400</span><span class="pun">,</span><span class="str">“linear”</span><span class="pun">,</span><span class="kwd">function</span><span class="pun">(){</span></li></p>
<p><li class="L2"><span class="pln"> $second</span><span class="pun">.</span><span class="pln">animate</span><span class="pun">({</span></li></p>
<p><li class="L3"><span class="str">“right”</span><span class="pun">:</span><span class="lit">220</span><span class="pun">,</span></li></p>
<p><li class="L4"><span class="str">“bottom”</span><span class="pun">:</span><span class="lit">220</span></li></p>
<p><li class="L5"><span class="pun">},</span><span class="lit">400</span><span class="pun">,</span><span class="str">“linear”</span><span class="pun">,</span><span class="kwd">function</span><span class="pun">(){</span></li></p>
<p><li class="L6"><span class="pln"> $second</span><span class="pun">.</span><span class="pln">animate</span><span class="pun">({</span></li></p>
<p><li class="L7"><span class="str">“right”</span><span class="pun">:</span><span class="lit">0</span><span class="pun">,</span></li></p>
<p><li class="L8"><span class="str">“bottom”</span><span class="pun">:</span><span class="lit">220</span></li></p>
<p><li class="L9"><span class="pun">},</span><span class="lit">400</span><span class="pun">,</span><span class="str">“linear”</span><span class="pun">,</span><span class="kwd">function</span><span class="pun">(){</span></li></p>
<p><li class="L0"><span class="pln"> $second</span><span class="pun">.</span><span class="pln">animate</span><span class="pun">({</span></li></p>
<p><li class="L1"><span class="str">“right”</span><span class="pun">:</span><span class="lit">0</span><span class="pun">,</span></li></p>
<p><li class="L2"><span class="str">“bottom”</span><span class="pun">:</span><span class="lit">0</span></li></p>
<p><li class="L3"><span class="pun">},</span><span class="lit">400</span><span class="pun">,</span><span class="str">“linear”</span><span class="pun">,</span><span class="kwd">function</span><span class="pun">(){</span></li></p>
<p><li class="L4"><span class="pln"> secondMove</span><span class="pun">();</span></li></p>
<p><li class="L5"><span class="pun">});</span></li></p>
<p><li class="L6"><span class="pun">});</span></li></p>
<p><li class="L7"><span class="pun">});</span></li></p>
<p><li class="L8"><span class="pun">});</span></li></p>
<p><li class="L9"><span class="pun">})();</span></li><br><br></p>
<p><div class="jspVerticalBar"></div><br></p>
<p></p><p>&nbsp;</p><p></p>
<p></p><p>这种实现简单粗暴。我写的这段代码回调链太深了，不好看。有比我更熟悉jquery的朋友不使用complete回调，而是直接$.animate().animate()这样的调用链，效果一样，代码会短很多。不过jquery代码美化优化什么的不是今天的重点。重点是什么？学习缓动函数。</p><p></p>
<p></p><h2>缓动函数（animation easing）</h2><p></p>
<p></p><p>缓动函数是用来描述动画效果，在jquery中，实现了两种，分别是 linear和 swing。 linear效果就是没有效果，动画速度是均匀的，呈线性变化。 swing呢，动画效果呈线慢-快-慢的变化。swing也是$.animate的默认动画效果。</p><p></p>
<p></p><p>或许仅仅这么说还是难以让人理解缓动函数在干什么，那就参考一下下面来自jquery ui的例子：</p><p></p>
<p></p><p>或者参考<a href="http://www.zhouhua.info/jump/xyu0" target="_blank">jquery easing plugin</a>。</p><p></p>
<p></p><p>回到jquery ui提供的各个缓动函数示意图上，对于任意一张示意图，横向表示时间，纵向表示动画变化量。当斜率越大时，表示此时动画速率越快。</p><p></p>
<p></p><p>我们定义几个变量和常量来标记一下：动画起始变化量为<em>begin</em>，为方便计算，定义为常数0；动画结束和起始时的变化差值（总变化量）<em>change</em>，为方便计算，定义为常数1；动画持续时间<em>duration</em>；动画已进行时间<em>currentTime</em>；动画进行的进度<em>progress</em>，它等同于 currentTime / duration；当前变化量<em>eased</em>，jquery中这样定义：</p><p></p>
<p><div class="jspContainer"></div></p>
<p><div class="jspPane"></div></p>
<p><ol class="linenums"></ol></p>
<p><li class="L0"><span class="pln">eased </span><span class="pun">=</span><span class="pln"> easingFunction</span><span class="pun">(</span><span class="pln">progress</span><span class="pun">,</span><span class="pln"> currentTime</span><span class="pun">,</span> <span class="kwd">begin</span><span class="pun">=</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> change</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> duration</span><span class="pun">);</span></li><br><br><br></p>
<p></p><p>&nbsp;</p><p></p>
<p></p><p>从上面的效果中随便挑一个出来看看是如何实现的吧：</p><p></p>
<p><div class="jspContainer"></div></p>
<p><div class="jspPane"></div></p>
<p><ol class="linenums"></ol></p>
<p><li class="L0"><span class="kwd">function</span><span class="pln"> easeOutBounce</span><span class="pun">(</span><span class="pln">progress</span><span class="pun">,</span><span class="pln"> currentTime</span><span class="pun">,</span> <span class="kwd">begin</span><span class="pun">,</span><span class="pln"> change</span><span class="pun">,</span><span class="pln"> duration</span><span class="pun">)</span> <span class="pun">{</span></li></p>
<p><li class="L1"><span class="kwd">if</span> <span class="pun">((</span><span class="pln">currentTime</span><span class="pun">/=</span><span class="pln">duration</span><span class="pun">)</span> <span class="pun">&lt;</span> <span class="pun">(</span><span class="lit">1</span><span class="pun">/</span><span class="lit">2.75</span><span class="pun">))</span> <span class="pun">{</span></li></p>
<p><li class="L2"><span class="kwd">return</span><span class="pln"> change</span><span class="pun"><em>(</em></span><span class="lit">7.5625</span><span class="pun"></span><span class="pln">currentTime</span><span class="pun">*</span><span class="pln">currentTime</span><span class="pun">)</span> <span class="pun">+</span> <span class="kwd">begin</span><span class="pun">;</span></li></p>
<p><li class="L3"><span class="pun">}</span> <span class="kwd">else</span> <span class="kwd">if</span> <span class="pun">(</span><span class="pln">currentTime </span><span class="pun">&lt;</span> <span class="pun">(</span><span class="lit">2</span><span class="pun">/</span><span class="lit">2.75</span><span class="pun">))</span> <span class="pun">{</span></li></p>
<p><li class="L4"><span class="kwd">return</span><span class="pln"> change</span><span class="pun"><em>(</em></span><span class="lit">7.5625</span><span class="pun">(</span><span class="pln">currentTime</span><span class="pun">-=(</span><span class="lit">1.5</span><span class="pun">/</span><span class="lit">2.75</span><span class="pun">))*</span><span class="pln">currentTime </span><span class="pun">+</span> <span class="pun">.</span><span class="lit">75</span><span class="pun">)</span> <span class="pun">+</span> <span class="kwd">begin</span><span class="pun">;</span></li></p>
<p><li class="L5"><span class="pun">}</span> <span class="kwd">else</span> <span class="kwd">if</span> <span class="pun">(</span><span class="pln">currentTime </span><span class="pun">&lt;</span> <span class="pun">(</span><span class="lit">2.5</span><span class="pun">/</span><span class="lit">2.75</span><span class="pun">))</span> <span class="pun">{</span></li></p>
<p><li class="L6"><span class="kwd">return</span><span class="pln"> change</span><span class="pun"><em>(</em></span><span class="lit">7.5625</span><span class="pun">(</span><span class="pln">currentTime</span><span class="pun">-=(</span><span class="lit">2.25</span><span class="pun">/</span><span class="lit">2.75</span><span class="pun">))*</span><span class="pln">currentTime </span><span class="pun">+</span> <span class="pun">.</span><span class="lit">9375</span><span class="pun">)</span> <span class="pun">+</span> <span class="kwd">begin</span><span class="pun">;</span></li></p>
<p><li class="L7"><span class="pun">}</span> <span class="kwd">else</span> <span class="pun">{</span></li></p>
<p><li class="L8"><span class="kwd">return</span><span class="pln"> change</span><span class="pun"><em>(</em></span><span class="lit">7.5625</span><span class="pun">(</span><span class="pln">currentTime</span><span class="pun">-=(</span><span class="lit">2.625</span><span class="pun">/</span><span class="lit">2.75</span><span class="pun">))*</span><span class="pln">currentTime </span><span class="pun">+</span> <span class="pun">.</span><span class="lit">984375</span><span class="pun">)</span> <span class="pun">+</span> <span class="kwd">begin</span><span class="pun">;</span></li></p>
<p><li class="L9"><span class="pun">}</span></li></p>
<p><li class="L0"><span class="pun">}</span></li><br><br></p>
<p><div class="jspVerticalBar"></div><br></p>
<p></p><p>&nbsp;</p><p></p>
<p></p><p>说到这儿，我想该插一点相关话题。熟悉css3的朋友会知道，css3的动画也有缓动函数，不过换了个名字，叫<em>timing function</em>。在transition中是transition-timing-function，在animate里是animate-timing-function。主要支持的动画有ease、linear、ease-in、ease-out、ease-in-out等。那如果想要的动画不在浏览器默认支持的列表中怎么办？css3也是支持自定义timing-function的，不过不同于jquery的easing function，timing function并不是描述特定时间下的动画量，而是直接描述上面我们看到的曲线图。timing function允许使用三次贝塞尔曲线方程描述动画曲线。三次贝塞尔方程接受4个点的参数：</p><p></p>
<p><div class="jspContainer"></div></p>
<p><div class="jspPane"></div></p>
<p><ol class="linenums"></ol></p>
<p><li class="L0"><span class="pln">cubic</span><span class="pun">-</span><span class="pln">bezier</span><span class="pun">(</span><span class="pln">P1x</span><span class="pun">,</span><span class="pln"> P1y</span><span class="pun">,</span><span class="pln"> P2x</span><span class="pun">,</span><span class="pln"> P2y</span><span class="pun">)</span></li><br><br></p>
<p><div class="jspVerticalBar"></div><br></p>
<p></p><p>&nbsp;</p><p></p>
<p></p><p>但在css的timing function场景下，P0点就是(0, 0)，P3点就是(1, 1)。于是变量就只剩下两个点的坐标，调用方式就变成了： cubic-bezier(P1x, P1y, P2x, P2y)。在W3C的规范中，定义了这四个点的纵横坐标都需要在0和1之间，这也就意味着无论怎么变化，曲线上所有的点都必须在这个1*1的正方形内，对比上面jquery ui easing的曲线图，我们可以确认像elastic这类的效果，使用timing-function就无能为力了。</p><p></p>
<p></p><p>想多了解一下css3的timing function，不妨到<a href="http://www.zhouhua.info/jump/q6nt" target="_blank">这个网站</a>上自己动手试验一下。</p><p></p>
<p></p><h2>编写easing function</h2><p></p>
<p></p><p>说了半天的timing function，终于又回到easing function上来了。自己动手写easing function，那自由度，无边无际。从上面的介绍中，我们往往会有这样一个错觉，progress=0时，eased=0；progress=1时，eased=1。timing function中，因为P0和P3是定死的，所以这条一定成立，但在easing function中，其实并没有这个限制。</p><p></p>
<p></p><p>什么意思？以我们开篇的动画为例，我们看一个方块从左上角运动一圈的轨迹。先说水平方向上，progress&lt;0.25时，left属性从0px变成220px；0.25&lt;=progress&lt;0.5时，left保持220px；0.5&lt;=progress&lt;0.75时，left属性从220px变成0px；0.75&lt;=progress&lt;1时，left保持0px。再看竖直方向上，progress&lt;0.25时，top保持0px；0.25&lt;=progress&lt;0.5时，top从0px变成220px；0.5&lt;=progress&lt;0.75时，top保持220px；0.75&lt;=progress&lt;1时，top从220px变成0px。那么这个过程反映成easing function就是：</p><p></p>
<p><div class="jspContainer"></div></p>
<p><div class="jspPane"></div></p>
<p><ol class="linenums"></ol></p>
<p><li class="L0"><span class="kwd">function</span><span class="pln"> horizontal</span><span class="pun">(</span><span class="pln">progress</span><span class="pun">)</span> <span class="pun">{</span></li></p>
<p><li class="L1"><span class="kwd">if</span> <span class="pun">(</span><span class="pln">progress </span><span class="pun">&lt;</span> <span class="lit">0.25</span><span class="pun">)</span> <span class="pun">{</span></li></p>
<p><li class="L2"><span class="kwd">return</span><span class="pln"> progress </span><span class="pun">*</span> <span class="lit">4</span><span class="pun">;</span></li></p>
<p><li class="L3"><span class="pun">}</span></li></p>
<p><li class="L4"><span class="kwd">else</span> <span class="kwd">if</span> <span class="pun">(</span><span class="pln">progress </span><span class="pun">&lt;</span> <span class="lit">0.5</span><span class="pun">)</span> <span class="pun">{</span></li></p>
<p><li class="L5"><span class="kwd">return</span> <span class="lit">1</span><span class="pun">;</span></li></p>
<p><li class="L6"><span class="pun">}</span></li></p>
<p><li class="L7"><span class="kwd">else</span> <span class="kwd">if</span> <span class="pun">(</span><span class="pln">progress </span><span class="pun">&lt;</span> <span class="lit">0.75</span><span class="pun">)</span> <span class="pun">{</span></li></p>
<p><li class="L8"><span class="kwd">return</span> <span class="pun">(</span><span class="lit">0.75</span> <span class="pun">-</span><span class="pln"> progress</span><span class="pun">)</span> <span class="pun">*</span> <span class="lit">4</span><span class="pun">;</span></li></p>
<p><li class="L9"><span class="pun">}</span></li></p>
<p><li class="L0"><span class="kwd">return</span> <span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L1"><span class="pun">}</span></li></p>
<p><li class="L2"><span class="kwd">function</span><span class="pln"> vertical</span><span class="pun">(</span><span class="pln">progress</span><span class="pun">)</span> <span class="pun">{</span></li></p>
<p><li class="L3"><span class="kwd">if</span> <span class="pun">(</span><span class="pln">progress </span><span class="pun">&lt;</span> <span class="lit">0.25</span><span class="pun">)</span> <span class="pun">{</span></li></p>
<p><li class="L4"><span class="kwd">return</span> <span class="lit">0</span><span class="pun">;</span></li></p>
<p><li class="L5"><span class="pun">}</span></li></p>
<p><li class="L6"><span class="kwd">else</span> <span class="kwd">if</span> <span class="pun">(</span><span class="pln">progress </span><span class="pun">&lt;</span> <span class="lit">0.5</span><span class="pun">)</span> <span class="pun">{</span></li></p>
<p><li class="L7"><span class="kwd">return</span> <span class="pun">(</span><span class="pln">progress </span><span class="pun">-</span> <span class="lit">0.25</span><span class="pun">)</span> <span class="pun">*</span> <span class="lit">4</span><span class="pun">;</span></li></p>
<p><li class="L8"><span class="pun">}</span></li></p>
<p><li class="L9"><span class="kwd">else</span> <span class="kwd">if</span> <span class="pun">(</span><span class="pln">progress </span><span class="pun">&lt;</span> <span class="lit">0.75</span><span class="pun">)</span> <span class="pun">{</span></li></p>
<p><li class="L0"><span class="kwd">return</span> <span class="lit">1</span><span class="pun">;</span></li></p>
<p><li class="L1"><span class="pun">}</span></li></p>
<p><li class="L2"><span class="kwd">return</span> <span class="pun">(</span><span class="lit">1</span> <span class="pun">-</span><span class="pln"> progress</span><span class="pun">)</span> <span class="pun">*</span> <span class="lit">4</span><span class="pun">;</span></li></p>
<p><li class="L3"><span class="pun">}</span></li><br><br></p>
<p><div class="jspVerticalBar"></div><br></p>
<p></p><p>&nbsp;</p><p></p>
<p></p><p>接下来扩展jquery的easing效果库：</p><p></p>
<p><div class="jspContainer"></div></p>
<p><div class="jspPane"></div></p>
<p><ol class="linenums"></ol></p>
<p><li class="L0"><span class="pln">$</span><span class="pun">.</span><span class="pln">extend</span><span class="pun">(</span><span class="pln">$</span><span class="pun">.</span><span class="pln">easing</span><span class="pun">,</span></li></p>
<p><li class="L1"><span class="pun">{</span></li></p>
<p><li class="L2"><span class="str">“vertical”</span><span class="pun">:</span><span class="pln"> vertical</span><span class="pun">,</span></li></p>
<p><li class="L3"><span class="str">“horizontal”</span><span class="pun">:</span><span class="pln"> horizontal</span></li></p>
<p><li class="L4"><span class="pun">});</span></li><br><br><br></p>
<p></p><p>&nbsp;</p><p></p>
<p></p><p>在$.animate中就可以像linear或者swing那样使用了：</p><p></p>
<p><div class="jspContainer"></div></p>
<p><div class="jspPane"></div></p>
<p><ol class="linenums"></ol></p>
<p><li class="L0"><span class="pun">(</span><span class="kwd">function</span><span class="pln"> firstMove</span><span class="pun">(){</span></li></p>
<p><li class="L1"><span class="pln"> $first</span><span class="pun">.</span><span class="pln">animate</span><span class="pun">({</span></li></p>
<p><li class="L2"><span class="str">“left”</span><span class="pun">:</span><span class="lit">220</span><span class="pun">,</span></li></p>
<p><li class="L3"><span class="str">“top”</span><span class="pun">:</span><span class="lit">220</span></li></p>
<p><li class="L4"><span class="pun">},{</span></li></p>
<p><li class="L5"><span class="pln"> duration</span><span class="pun">:</span> <span class="lit">1600</span><span class="pun">,</span></li></p>
<p><li class="L6"><span class="pln"> specialEasing</span><span class="pun">:</span> <span class="pun">{</span></li></p>
<p><li class="L7"><span class="pln"> left</span><span class="pun">:</span> <span class="str">‘horizontal’</span><span class="pun">,</span></li></p>
<p><li class="L8"><span class="pln"> top</span><span class="pun">:</span> <span class="str">‘vertical’</span></li></p>
<p><li class="L9"><span class="pun">},</span></li></p>
<p><li class="L0"><span class="pln"> complete</span><span class="pun">:</span> <span class="kwd">function</span><span class="pun">()</span> <span class="pun">{</span></li></p>
<p><li class="L1"><span class="pln"> firstMove</span><span class="pun">();</span></li></p>
<p><li class="L2"><span class="pun">}</span></li></p>
<p><li class="L3"><span class="pun">});</span></li></p>
<p><li class="L4"><span class="pun">})();</span></li></p>
<p><li class="L5"><span class="pun">(</span><span class="kwd">function</span><span class="pln"> secondMove</span><span class="pun">(){</span></li></p>
<p><li class="L6"><span class="pln"> $second</span><span class="pun">.</span><span class="pln">animate</span><span class="pun">({</span></li></p>
<p><li class="L7"><span class="str">“left”</span><span class="pun">:</span><span class="lit">0</span><span class="pun">,</span></li></p>
<p><li class="L8"><span class="str">“top”</span><span class="pun">:</span><span class="lit">0</span></li></p>
<p><li class="L9"><span class="pun">},{</span></li></p>
<p><li class="L0"><span class="pln"> duration</span><span class="pun">:</span> <span class="lit">1600</span><span class="pun">,</span></li></p>
<p><li class="L1"><span class="pln"> specialEasing</span><span class="pun">:</span> <span class="pun">{</span></li></p>
<p><li class="L2"><span class="pln"> left</span><span class="pun">:</span> <span class="str">‘horizontal’</span><span class="pun">,</span></li></p>
<p><li class="L3"><span class="pln"> top</span><span class="pun">:</span> <span class="str">‘vertical’</span></li></p>
<p><li class="L4"><span class="pun">},</span></li></p>
<p><li class="L5"><span class="pln"> complete</span><span class="pun">:</span> <span class="kwd">function</span><span class="pun">()</span> <span class="pun">{</span></li></p>
<p><li class="L6"><span class="pln"> secondMove</span><span class="pun">();</span></li></p>
<p><li class="L7"><span class="pun">}</span></li></p>
<p><li class="L8"><span class="pun">});</span></li></p>
<p><li class="L9"><span class="pun">})();</span></li><br><br></p>
<p><div class="jspVerticalBar"></div><br></p>
<p></p><p>&nbsp;</p><p></p>
<p></p><p>我们通过specialEasing这个参数为水平方向和竖直方向指定了不同的动画效果。当然了，在这个场景中，自己写缓动函数并没有降低整体的复杂度，毕竟这个缓动函数逻辑太碎，理解起来肯定比四个animate连起来的方式复杂。但我希望能给大家带来一些思路上的启示，为以后可能遇到的问题积累经验。</p><p></p>
<blockquote><p>博客地址：<a href="http://www.zhouhua.info/2015/03/10/easing/" target="_blank">http://www.zhouhua.info/2015/03/10/easing/</a></p></blockquote>





      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/15/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/25/">25</a><a class="extend next" rel="next" href="/page/17/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 Soul
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>